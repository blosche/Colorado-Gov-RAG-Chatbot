
<!DOCTYPE html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107162357-3"></script>
<script>
    //Google Analytics for production
    if (document.location.toString().toLowerCase().search('dnrweb.state.co.us/cdss/') || document.location.toString().toLowerCase().search('dwr.state.co.us/tools/')) {
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-107162357-3');
    }

    // Reloads page when user traverses app with browser buttons.
    // Mitigates issues with caching.
    /*window.addEventListener("pageshow", function (event) {
        var historyTraversal = event.persisted ||
            (typeof window.performance != "undefined" &&
                window.performance.navigation.type === 2);
        if (historyTraversal) {
            // Handle page restore.
            window.location.reload();
        }
    });*/
</script>
<html lang="en">

<style>

    /*.panel-body {
        padding: 0!important;
    }*/


    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
        height: auto;
        -webkit-appearance: none;
    }

    .alert-yellow {
        background-color: yellow;
        border: 2px solid red;
        margin: 0px;
        padding: 2px;
        font-weight: bold;
        text-align: center;
    }


    .Pull-Right, a.Pull-Right, li > a.Pull-Right {
        float: right;
        font-size: 14px;
        padding-right: 10px;
    }


    .navbar-nav > li > a, .navbar-brand {
        padding-top: 4px !important;
        padding-bottom: 0 !important;
        height: 28px;
    }

    .navbar {
        min-height: 28px !important;
    }

    .navbar-nav {
        margin: 0 !important;
    }

    .dropdown-menu > li,
    .dropdown-menu a,
    .dropdown-menu ul
    /*.dropdown-menu > li > ul > li ,

     .dropdown-menu > ul > li*/
    .dropdown-menu > li > ul > li > a {
        display: block;
        padding: 3px 12px;
        clear: both;
        font-weight: normal;
        line-height: 1.42857143;
        color: #333;
        white-space: nowrap;
        list-style-type: none;
    }

    .dropdown-menu li, .dropdown-menu > a {
        padding-left: 20px;
    }

    .dropdown a:hover,
    .dropdown a:focus {
        color: white !important;
        text-decoration: none;
        background-color: #356686 !important;
        /*color: hotpink!important;
        background-color: #f5f5f5!important;*/
    }

    .dropdown-menu a:hover,
    .dropdown-menu a:focus {
        color: white !important;
        text-decoration: none;
        background-color: #356686 !important;
        /*color: hotpink!important;
        background-color: #f5f5f5!important;*/
    }

    .transparent-background > a:focus, .transparent-background > a:hover {
        background: transparent !important;
        background-color: transparent !important;
    }

    a.k-header-column-menu.k-state-active {
        background-color: transparent;
        color: red;
    }

    sup {
        font-size: 80% !important;
    }
</style>

<head>
    <meta charset="utf-8">
    
    <meta name="description" content="Visit Colorado CDSS Active Calls search page to see the current Administrative Calls in all Divisions." />
    <meta name="keywords" content="administrative call, river call, active call" />

    <meta name="keywords" content="Colorado, Colorado Decision Support Systems, CDSS, Division of Water Resources, DWR, State Engineer's Office, SEO, hydrobase, tools, CDSS tools" />
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <link href="/Tools/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <link href='/Tools/Content/bootstrap.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Content/bootstrap-datepicker3.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Styles/DWRMainMVC.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Styles/HeaderMenu.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Styles/HomePage.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Styles/map-icons.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Styles/CdssControls.css?v=06-25-2024_1425' rel='stylesheet'/>

    <script src='/Tools/Scripts/modernizr-2.8.3.js?v=06-25-2024_1425'></script>

    <script src='/Tools/Scripts/jquery-3.1.1.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/jquery-ui.min.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/moment.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/jquery.fileDownload.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/jquery.geocomplete.min.js?v=06-25-2024_1425'></script>

    <script src='/Tools/Scripts/bootstrap.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/bootstrap-datepicker.js?v=06-25-2024_1425'></script>

    <link href='/Tools/Content/kendo/2020.2.617/kendo.common-bootstrap.min.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Content/kendo/2020.2.617/kendo.bootstrap.min.css?v=06-25-2024_1425' rel='stylesheet'/>

    <script src='/Tools/Scripts/kendo/2020.2.617/kendo.all.min.js?v=06-25-2024_1425'></script>
<script src='/Tools/Scripts/kendo/2020.2.617/kendo.aspnetmvc.min.js?v=06-25-2024_1425'></script>

    <script src='/Tools/js/Utils.js?v=LbWa0dRtwNpRIr6mE1dR7CssqBzdXs5icJ6jf9SOclc1?v=06-25-2024_1425'></script>

    
    <script src='/Tools/js/toolTips.js?v=06-25-2024_1425'></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/OverlappingMarkerSpiderfier/1.0.3/oms.js"></script>

    <meta name="viewport" content="width=device-width" />
    <title>Active Calls</title>
</head>
<body>
    <script type="text/javascript" src="/Tools/Scripts/spin.min.js"></script>


    <script type="text/javascript">
        function loadSpinner() {
            var trget = document.getElementById('loading');
            var opts = {
                lines: 12, // The number of lines to draw
                length: 7, // The length of each line
                width: 4, // The line thickness
                radius: 10, // The radius of the inner circle
                color: '#000', // #rgb or #rrggbb
                speed: 1, // Rounds per second
                trail: 60, // Afterglow percentage
                shadow: false, // Whether to render a shadow
                hwaccel: false // Whether to use hardware acceleration
            };
            $("#loading").fadeIn();
            new Spinner(opts).spin(trget);
        }

        function stopSpinner() {
            var spinnerDiv = document.getElementById('loading');
            spinnerDiv.style.display = 'none';
        }
    </script>
    <div id="loading">
        <div id="loadingcont">
            <p id="loadingspinr">
            </p>
        </div>
    </div>
    <script>
        if (window.location !== window.parent.location) {	  // The page is in an iframe
            $(".navbar").hide();
            $("#footer").hide();
        }
        else {	  // The page is not in an iframe
            $(".navbar").show();
            $("#footer").show();
        }

        loadSpinner();
        $(window).on('load', function () { stopSpinner(); });
        $(document).on("show.bs.modal", ".modal.fade[role='dialog']", function (e) {
            // Ensure modals are on top of kendo windows
            var maxZindex = Math.max.apply(Math, $(".k-window").map(function () { return $(this).css("z-index"); }).get());
            if (maxZindex != null && maxZindex != 0 && isFinite(maxZindex))
                $(e.target).css("z-index", maxZindex + 1);
        });
    </script>


    
    <div id="header" class="header" style="padding: 0;">


        <div class="container-fluid" id="bannerheader" data-toggle="expand" data-target="#menuitemlist">
            <div class="bottom-right" style="top: 10px">
                <span style="cursor: pointer;" onclick="ShowBanner(false);"><img src="/Tools/Images/angle-double-up.svg" class="Show-DesktopMenu" id="hideBanner" style="height: 20px" alt="Click to hide top banner" /></span>
            </div>
            <div id="userDiv">
                <div class="bottom-right" id="signedInUser" style="display: none">
                    Welcome <text id="userName"></text>,
                    <a href="" data-toggle="modal" data-target="#logoutModal">
                        <span class="glyphicon glyphicon-log-out"></span> Sign out
                    </a>
                </div>
                <div class="bottom-right" id="guestUser" style="display: none">
                    <text id="guestUserWelcome" style="font-style: italic">Welcome Guest, </text>
                    <a href=/Tools/Home/LoginUser>
                        Click here to Login <span class="glyphicon glyphicon-log-in"></span>
                    </a>
                </div>
            </div>

<script src='/Tools/js/KendoGridSettingsUtils.js?v=06-25-2024_1425'></script>
<script>
    function handleVisibilityChange() {
        if (!document.hidden) {
            pageLoadOrTabOpened();
        }
    }

        
    var _newGridObserver = null;
    var _grids = {};

    function registerGridObserver(jQuerySelectorCriteriaForGridsWithSettings) {
        if (_newGridObserver != null) return;
        var gridsToBind = $(".k-grid");
        if (jQuerySelectorCriteriaForGridsWithSettings != null)
            gridsToBind = gridsToBind.filter(jQuerySelectorCriteriaForGridsWithSettings);
        gridsToBind.each(function(index) {
            _grids[$(this).attr("id")] = true;
        });
        _newGridObserver = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                var i;
                var addedNodes = mutation.addedNodes;
                var len = addedNodes.length;
                for (i = 0; i < len; i++) {
                    var node = addedNodes[i];
                    var id = node.id;
                    if (id != null && node.classList.contains("k-grid") && _grids[id] != null) {
                        _grids[id] = true;
                        bindGridForSaving(node, signedInUser != null, signedInUser != null);
                    }
                }
            });
        });

        // configuration of the observer: only fire when the child list changes
        var config = { childList: true, subtree: true }

        // pass in the target node, as well as the observer options
        _newGridObserver.observe(document, config);
    }

    function bindAllGrids(signedIn, triggerGetCommand) {
        $(document).ready(function() {
            var jQuerySelectorCriteriaForGridsWithSettings = null;
            //Need to define below named function in pages if you want to limit which grids get settings
            if (typeof getJQuerySelectorCriteriaForGridsWithSettings === "function")
                jQuerySelectorCriteriaForGridsWithSettings = getJQuerySelectorCriteriaForGridsWithSettings();
            registerGridObserver(jQuerySelectorCriteriaForGridsWithSettings);
            setTimeout(function () {
                var gridsToBind = $(".k-grid");
                if (jQuerySelectorCriteriaForGridsWithSettings != null)
                    gridsToBind = gridsToBind.filter(jQuerySelectorCriteriaForGridsWithSettings);
                gridsToBind.each(function (index) {
                    bindGridForSaving(this, signedIn, triggerGetCommand);
                });
            }, 100); 
        });
    }

    function bindGridForSaving(element, signedIn, triggerGetCommand) {
        var grid = $(element).data("kendoGrid");
        if (grid == null) return;
        var gridId = $(element).attr("id");
        var saveUrl = "/Tools/Home/Home/SaveGridSettings?grid=" +
            gridId;
        var getUrl = "/Tools/Home/Home/GetGridSettings?grid=" +
            gridId;
        var getNameListUrl = "/Tools/Home/Home/GetGridSettingsNames?grid=" +
            gridId;
        var renameSettingUrl = "/Tools/Home/Home/RenameGridSetting?grid=" +
            gridId;
        var setChosenConfigUrl = "/Tools/Home/Home/SetChosenKendoGridConfig?grid=" +
            gridId;
        bindGridToSaveSettings(gridId, saveUrl, getUrl, signedIn, triggerGetCommand, renameSettingUrl, getNameListUrl, setChosenConfigUrl);
    }

    var signedInUser = null;
    var timeoutWarningHandler = null;
    var countDownHandler = null;
    var onSignInOrRenewInit = true;

    function onSignInOrRenew(jsonUser) {
        setDates(jsonUser);
        var newUser = jsonUser.SignedIn ? (jsonUser.FirstName + " " + jsonUser.LastName) : null;
        if (newUser != null && jsonUser.EmailAddress != null
            && (jsonUser.FirstName == null || jsonUser.FirstName.length === 0 || jsonUser.LastName == null || jsonUser.LastName.length === 0 )) {
            newUser = jsonUser.EmailAddress;
        }
 if (onSignInOrRenewInit === true || signedInUser !== newUser) { try { bindAllGrids(jsonUser.SignedIn, jsonUser.SignedIn ? signedInUser !== newUser : false); } catch (e) { console.log(e); } }        onSignInOrRenewInit = false;
        signedInUser = newUser;
        $("#signedInUser").toggle(jsonUser.SignedIn);
        $("#MyAccounts").toggle(jsonUser.SignedIn);
        $("#guestUser").toggle(!jsonUser.SignedIn);
        $("#loginDiv").toggle(!jsonUser.SignedIn);
        if (timeoutWarningHandler != null) clearTimeout(timeoutWarningHandler);
        if (countDownHandler != null) clearInterval(countDownHandler);
        if (jsonUser.SignedIn) {
            $("#userName")
                .text(signedInUser != null ? signedInUser : "");
            $("#guestUserLogin").addClass("hide");
            var expirationDateMillis = jsonUser.Expiration;
            var timeUntilExpiration = expirationDateMillis - Date.now();
            var warningUntilExpirationSeconds = 180;
            var warningUntilExpiration = (1000 * warningUntilExpirationSeconds);
            var timeToWarning = timeUntilExpiration - warningUntilExpiration;
            if (timeUntilExpiration > warningUntilExpiration)
                $("#modalSignOut").modal("hide");
            // Triggers the warning late by a few seconds to ensure the expiration has passed before refreshing or getting the user.
            // Without it, race condition can occur and user may or may not be shown as signed out correctly
            var triggerLateAmountSeconds = 2;
            var triggerLateAmount = 1000 * triggerLateAmountSeconds;
            timeoutWarningHandler = setTimeout(function() {
                var elem = document.getElementById("modalSignOutTime");
                var time = Math.floor(expirationDateMillis / 1000) - Math.floor(Date.now() / 1000);
                if (time > 0) {
                    $("#modalSignOut").modal("show");
                    time += 1 + triggerLateAmountSeconds;
                    frame();
                    if (countDownHandler != null) clearInterval(countDownHandler);
                    countDownHandler = setInterval(frame, 1000);

                    function frame() {
                        var fullSeconds = --time;
                        var seconds = fullSeconds % 60;
                        var minutes = Math.floor((fullSeconds - seconds) / 60);
                        var text = "<br/>";
                        text += minutes + ":" + (seconds >= 10 ? seconds : "0" + seconds);
                        if (elem != null) {
                            elem.innerHTML = text;
                        }
                        if (time <= 0) {
                            onExpiration();
                        }
                    }
                } else {
                    onExpiration();
                }
            },
            Math.min(timeToWarning + triggerLateAmount, 0x7FFFFFFF));//setTimeout uses 32 bit number, and the maximum number that can be held by 32 bits is 2^32 = 0x7FFFFFFF = 2147483647

            function onExpiration() {
                $("#modalSignOut").modal("hide");
                if (countDownHandler != null) clearInterval(countDownHandler);
pageLoadOrTabOpened();            }
        } else {
            $("#guestUser").toggle(true);
            $("#loginDiv").toggle(true);
            $("#guestUser").toggle(true);
            $("#guestUserLogin").removeClass("hide");
            $("#modalSignOut").modal("hide");

        }
        $(document).trigger("cdssSignInOrRenewed", [jsonUser]);
    }

    function pageLoadOrTabOpened() {
        //if (!$("#modalSignOut").is(':visible'))
        $.ajax({
            type: "POST",
            url: "/Tools/Home/GetUser",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                onSignInOrRenew(response);
            },
            failure: function (response) {
                signedInUser = null;
                $("#MyAccounts").toggle(false);
                $("#signedInUser").toggle(false);
                $("#guestUser").toggle(true);
                $("#guestUserLogin").removeClass("hide");
                if (timeoutWarningHandler != null) clearTimeout(timeoutWarningHandler);
                if (countDownHandler != null) clearInterval(countDownHandler);
                $("#modalSignOut").modal("hide");
bindAllGrids(false, false);            },
            error: function (response) {
                signedInUser = null;
                $("#MyAccounts").toggle(false);
                $("#signedInUser").toggle(false);
                $("#guestUser").toggle(true);
                $("#guestUserLogin").removeClass("hide");
                if (timeoutWarningHandler != null) clearTimeout(timeoutWarningHandler);
                if (countDownHandler != null) clearInterval(countDownHandler);
                $("#modalSignOut").modal("hide");
bindAllGrids(false, false);            }
        });
    }

    function renewSignIn(callback) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "/Tools/Home/RenewUser",
            success: function (response) {
                setDates(response);
                if (countDownHandler != null) clearInterval(countDownHandler);
                $("#modalSignOut").modal("hide");
                onSignInOrRenew(response);
                if (callback != null && typeof callback === "function") {
                    callback(response);
                }
                //pageLoadOrTabOpened();
            },
            failure: function (response) {
            },
            error: function (response) {

            }
        });
    }

    $(document).on("visibilitychange", handleVisibilityChange);
    $(document).ready(function () {
        $("#modalSignOut").on("click", "#modalSignOutRenewButton", renewSignIn);
        pageLoadOrTabOpened();
    });
</script>
            <div style="">
                <a href="https://dwr.state.co.us/tools/" title="Colorado Department of Natural Resources">
                    <img id="ImgDnrLarge" src="/Tools/Images/co_dnr_div_cdss_cwcbdwr_transparent.png" alt="Colorado Department of Natural Resources Home"
                         border="0" runat="server" style="height: 80px; margin: 19px;" />
                </a>
            </div>
        </div>

        <div class="container-fluid" id="bannerheadermobile" style="background: #356686; padding-left: 0; padding-right: 0">
            <div id="navMenuContentMobileLinks" class="Sidebar SidebarPinned" style="height:auto">
                <div id="SidebarContainer" class="SidebarContainer SidebarPinned">
                    <img id="ImgDnrShields" src="/Tools/Images/CDSSMobile.png" alt="Colorado Department of Natural Resources Home" style="border-right: 1px solid white; height: 35px; margin: 3px 0 0 0px; padding-right: 5px; padding-left: 10px; float: left">
                    
                    
                    <div class="container" onclick="myFunction(this)" style="margin-bottom: 0; float: right; margin-top: 4px" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
                        <div class="bar1"></div>
                        <div class="bar2"></div>
                        <div class="bar3"></div>
                    </div>

                    <div id="breadcrumbsDiv" class="SidebarSection SidebarNavigationMenu SidebarNavigationBreadcrumbs shrinkFont360" style="height:auto">
                        
                        
    <a href="/Tools/AdministrativeCalls/Active" style="color:white">Administrative Calls - Active</a>

                        <div class="SidebarSectionHeader">
                            <h2 class="SidebarSectionHeaderCaption">Navigation</h2>
                            <div class="clearer"></div>
                        </div>

                    </div>

                </div>
            </div>
        </div>

        <div class="collapse navbar-collapse nav-bar-color-desktop NavMenuStyling" id="navbar-collapse-1">
            <div class="dropdown" style="font-size: 14px">
                <div id="menuDropdown" class="container Show-DesktopMenu" onclick="myFunction(this); $('#menuDropdown').parent().toggleClass('open');" style="width: auto !important; margin-bottom: 0; margin-top: 9px; padding-left: 10px; float: left" aria-haspopup="true" aria-expanded="false">
                    <div class="bar1"></div>
                    <div class="bar2"></div>
                    <div class="bar3"></div>
                </div>
                <ul id="MenuSearchDropDown" class="dropdown-menu Desktop-Only-Menu" style="background: linear-gradient(190deg, #356686 31%, #3c3c3c 100%); margin-bottom: 25px; top: 96%; left: -1px">



<style>
    @media (max-width: 710px) {
        #mainnav li a.old-links span {
            visibility: hidden;
        }

        #mainnav li a.old-links:hover span {
            visibility: visible;
            color: #ff0000 !important;
        }

        #mainnav li a.old-links:hover {
            color: #ff0000 !important;
        }
    }

    @media (min-width: 710px) {
        li a.old-links span {
            visibility: hidden;
        }

        li a.old-links:hover span {
            visibility: visible;
            color: #ff0000 !important;
        }

        li a.old-links:hover {
            color: #ff0000 !important;
        }
    }
</style>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="https://dwr.colorado.gov/">DWR Home</a></li>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="https://cdss.colorado.gov/">CDSS Home</a></li>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="/Tools/Home">Dashboard</a></li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Administrative Calls  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/AdministrativeCalls/Active">Active</a></li>
        <li><a href="/Tools/AdministrativeCalls/Historical">Historical</a></li>
        <li><a href="/Tools/AdministrativeCalls/StructureCalls">Structure Call Analysis</a></li>
        <li><a href="/Tools/AdministrativeCalls/WaterSourceCalls">Water Source Call Analysis</a></li>
        <li><a href="/Tools/MyAlerts#calls">Call Alerts</a></li>
    </ul>
</li>
<li class="dropdown darkHoverBackground darkHoverBackground"><a href="/Tools/ClimateStations">Climate Stations</a></li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Dam Safety  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/DamSafety/Dams">Dams</a></li>
        <li><a href="/Tools/DamSafety/Livestock">Livestock Water Tank and Erosion Control</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Groundwater  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/GroundWater/GeoPhysicalLogs">Geophysical Logs</a></li>
        <li><a href="/Tools/GroundWater/WaterLevels">Water Levels</a></li>
        <li><a href="https://dwr.colorado.gov/services/well-construction-inspection#groundwater-levels" target="_blank">Water Level Reports</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Stations <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        
        <li><a href="/Tools/Stations?Stations=All">Current and Historical</a></li>
        <li><a href="/Tools/Stations" style="color: white">Current Conditions</a></li>
        <li><a href="/Tools/StationsLite" style="color: white">Stations Lite - <span style="font-style: italic;">mobile friendly</span></a></li>
    </ul>
</li>

<li class="dropdown darkHoverBackground"><a href="/Tools/Structures">Structures</a></li>

<li class="dropdown-submenu transparent-background" style="display: none;">
    <a href="#" class="dropdown" style="font-weight:bolder" data-toggle="dropdown">Tools <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/LocationConverter" style="color: white">Location Converter</a></li>
        <li><a href="/Tools/DistanceCalculator" style="color: white">Distance Calculator</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Water Rights <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/ISF">Instream Flow and Natural Lake Levels</a></li>
        <li><a href="/Tools/WaterRights/NetAmounts">Net Amounts</a></li>
        <li><a href="/Tools/WaterRights/Transactions">Transactions</a></li>
    </ul>
</li>

<li class="dropdown darkHoverBackground"><a href="/Tools/WellPermits">Well Permits</a></li>
<li class="dropdown"><a href="https://dwr.colorado.gov/services/data-information/gis">Map Viewer</a></li>
<li class="dropdown darkHoverBackground"><text class="menu-heading">Tools</text></li>

<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Aquifer Determination<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/DenverLocation" style="color: white">Denver Basin Aquifers - Specific Location</a></li>
        <li><a href="/Tools/DenverTract" style="color: white">Denver Basin Aquifers - Tract of Land</a></li>
        <li><a href="/Tools/DakotaLocation" style="color: white">Dakota/Cheyenne Aquifer</a></li>
    </ul>
</li>



<li class="dropdown"><a href="https://data.colorado.gov/browse?category=Water&limitTo=datasets&q=DWR&sortBy=alpha&utf8=%E2%9C%93">Information Marketplace</a></li>


<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Data Submittal<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/Reporting">Reporting Submittal</a></li>
        <li><a href="/Tools/DiversionRecords">Diversion Records</a></li>
        <li><a href="/Tools/MeterReadings">Meter Readings</a></li>
        <li><a href="/Tools/WaterLevels">Water Levels</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">My Stations<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/MyStations">My Stations</a></li>
        <li><a href="/Tools/MyAlerts">My Alerts</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Location Tools<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/LocationConverter" style="color: white">Location Converter</a></li>
        <li><a href="/Tools/DistanceCalculator" style="color: white">Distance Calculator</a></li>
    </ul>
</li>
<li class="dropdown"><a href="https://dwr.state.co.us/rest/get/help">REST Web Services</a></li>
<li><HR class="Show-MobileMenu" style="margin-bottom: 0;margin-top: 0" /></li>
<script>
    $(document).ready(function () {
        var trigger = $('.hamburger'),
            overlay = $('.overlay'),
            isClosed = false;

        trigger.click(function () {
            hamburger_cross();
        });

        function hamburger_cross() {

            if (isClosed == true) {
                overlay.hide();
                trigger.removeClass('is-open');
                trigger.addClass('is-closed');
                isClosed = false;
            } else {
                overlay.show();
                trigger.removeClass('is-closed');
                trigger.addClass('is-open');
                isClosed = true;
            }
        }

        $('[data-toggle="offcanvas"]').click(function () {
            $('#wrapper').toggleClass('toggled');
        });
    });


    function resizeMenu() {
        if (window.innerWidth < 710) {
            $(".second-dropdown-menu").each(function () {
                $(this).addClass("sub-dropdown-menu");
            });
            $(".dropdown-toggle-disabled").each(function () {
                $(this).addClass("dropdown-toggle");
                $(this).removeClass("dropdown-toggle-disabled");
                $(this).attr('disabled', false);
            });
            $(".dropdown-submenu").each(function () {
                $(this).addClass("dropdown-submenu-disabled");
                $(this).removeClass("dropdown-submenu");
            });
        } else {
            $(".sub-dropdown-toggle").each(function () {
                $(this).addClass("dropdown-toggle-disabled");
                $(this).removeClass("dropdown-toggle");
                $(this).attr('disabled', true);
            });
            $(".dropdown-submenu-disabled").each(function () {
                $(this).addClass("dropdown-submenu");
                $(this).removeClass("dropdown-submenu-disabled");
            });
            $(".second-dropdown-menu").each(function () {
                $(this).removeClass("sub-dropdown-menu");
            });
        }
    }


    $("#toggleDisplayConditions").hover(function (eventObject) {
        if (eventObject.type == "mouseenter") {
            $("#oldConditions").css("display", "inline");
        }

        if (eventObject.type == "mouseleave") {
            $("#oldConditions").css("display", "none");
        }

    });

</script>
                </ul>


                <span style="line-height: 3;" class="Desktop-Only">
                    
    <a href="/Tools/AdministrativeCalls/Active" style="color:white">Administrative Calls - Active</a>

                </span>
                <ul id="mainnav" class="nav navbar-nav Show-MobileMenu" style="padding-left: 15px">



<style>
    @media (max-width: 710px) {
        #mainnav li a.old-links span {
            visibility: hidden;
        }

        #mainnav li a.old-links:hover span {
            visibility: visible;
            color: #ff0000 !important;
        }

        #mainnav li a.old-links:hover {
            color: #ff0000 !important;
        }
    }

    @media (min-width: 710px) {
        li a.old-links span {
            visibility: hidden;
        }

        li a.old-links:hover span {
            visibility: visible;
            color: #ff0000 !important;
        }

        li a.old-links:hover {
            color: #ff0000 !important;
        }
    }
</style>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="https://dwr.colorado.gov/">DWR Home</a></li>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="https://cdss.colorado.gov/">CDSS Home</a></li>
<li class="dropdown darkHoverBackground"><a class="menu-heading" href="/Tools/Home">Dashboard</a></li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Administrative Calls  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/AdministrativeCalls/Active">Active</a></li>
        <li><a href="/Tools/AdministrativeCalls/Historical">Historical</a></li>
        <li><a href="/Tools/AdministrativeCalls/StructureCalls">Structure Call Analysis</a></li>
        <li><a href="/Tools/AdministrativeCalls/WaterSourceCalls">Water Source Call Analysis</a></li>
        <li><a href="/Tools/MyAlerts#calls">Call Alerts</a></li>
    </ul>
</li>
<li class="dropdown darkHoverBackground darkHoverBackground"><a href="/Tools/ClimateStations">Climate Stations</a></li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Dam Safety  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/DamSafety/Dams">Dams</a></li>
        <li><a href="/Tools/DamSafety/Livestock">Livestock Water Tank and Erosion Control</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Groundwater  <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/GroundWater/GeoPhysicalLogs">Geophysical Logs</a></li>
        <li><a href="/Tools/GroundWater/WaterLevels">Water Levels</a></li>
        <li><a href="https://dwr.colorado.gov/services/well-construction-inspection#groundwater-levels" target="_blank">Water Level Reports</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Stations <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        
        <li><a href="/Tools/Stations?Stations=All">Current and Historical</a></li>
        <li><a href="/Tools/Stations" style="color: white">Current Conditions</a></li>
        <li><a href="/Tools/StationsLite" style="color: white">Stations Lite - <span style="font-style: italic;">mobile friendly</span></a></li>
    </ul>
</li>

<li class="dropdown darkHoverBackground"><a href="/Tools/Structures">Structures</a></li>

<li class="dropdown-submenu transparent-background" style="display: none;">
    <a href="#" class="dropdown" style="font-weight:bolder" data-toggle="dropdown">Tools <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/LocationConverter" style="color: white">Location Converter</a></li>
        <li><a href="/Tools/DistanceCalculator" style="color: white">Distance Calculator</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Water Rights <span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/ISF">Instream Flow and Natural Lake Levels</a></li>
        <li><a href="/Tools/WaterRights/NetAmounts">Net Amounts</a></li>
        <li><a href="/Tools/WaterRights/Transactions">Transactions</a></li>
    </ul>
</li>

<li class="dropdown darkHoverBackground"><a href="/Tools/WellPermits">Well Permits</a></li>
<li class="dropdown"><a href="https://dwr.colorado.gov/services/data-information/gis">Map Viewer</a></li>
<li class="dropdown darkHoverBackground"><text class="menu-heading">Tools</text></li>

<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Aquifer Determination<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/DenverLocation" style="color: white">Denver Basin Aquifers - Specific Location</a></li>
        <li><a href="/Tools/DenverTract" style="color: white">Denver Basin Aquifers - Tract of Land</a></li>
        <li><a href="/Tools/DakotaLocation" style="color: white">Dakota/Cheyenne Aquifer</a></li>
    </ul>
</li>



<li class="dropdown"><a href="https://data.colorado.gov/browse?category=Water&limitTo=datasets&q=DWR&sortBy=alpha&utf8=%E2%9C%93">Information Marketplace</a></li>


<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Data Submittal<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/Reporting">Reporting Submittal</a></li>
        <li><a href="/Tools/DiversionRecords">Diversion Records</a></li>
        <li><a href="/Tools/MeterReadings">Meter Readings</a></li>
        <li><a href="/Tools/WaterLevels">Water Levels</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">My Stations<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/MyStations">My Stations</a></li>
        <li><a href="/Tools/MyAlerts">My Alerts</a></li>
    </ul>
</li>
<li class="dropdown-submenu transparent-background">
    <a href="#" class="dropdown" data-toggle="dropdown">Location Tools<span class="caret menu-caret Mobile-Only"></span></a>
    <ul class="second-dropdown-menu dropdown-menu" role="menu">
        <li><a href="/Tools/LocationConverter" style="color: white">Location Converter</a></li>
        <li><a href="/Tools/DistanceCalculator" style="color: white">Distance Calculator</a></li>
    </ul>
</li>
<li class="dropdown"><a href="https://dwr.state.co.us/rest/get/help">REST Web Services</a></li>
<li><HR class="Show-MobileMenu" style="margin-bottom: 0;margin-top: 0" /></li>
<script>
    $(document).ready(function () {
        var trigger = $('.hamburger'),
            overlay = $('.overlay'),
            isClosed = false;

        trigger.click(function () {
            hamburger_cross();
        });

        function hamburger_cross() {

            if (isClosed == true) {
                overlay.hide();
                trigger.removeClass('is-open');
                trigger.addClass('is-closed');
                isClosed = false;
            } else {
                overlay.show();
                trigger.removeClass('is-closed');
                trigger.addClass('is-open');
                isClosed = true;
            }
        }

        $('[data-toggle="offcanvas"]').click(function () {
            $('#wrapper').toggleClass('toggled');
        });
    });


    function resizeMenu() {
        if (window.innerWidth < 710) {
            $(".second-dropdown-menu").each(function () {
                $(this).addClass("sub-dropdown-menu");
            });
            $(".dropdown-toggle-disabled").each(function () {
                $(this).addClass("dropdown-toggle");
                $(this).removeClass("dropdown-toggle-disabled");
                $(this).attr('disabled', false);
            });
            $(".dropdown-submenu").each(function () {
                $(this).addClass("dropdown-submenu-disabled");
                $(this).removeClass("dropdown-submenu");
            });
        } else {
            $(".sub-dropdown-toggle").each(function () {
                $(this).addClass("dropdown-toggle-disabled");
                $(this).removeClass("dropdown-toggle");
                $(this).attr('disabled', true);
            });
            $(".dropdown-submenu-disabled").each(function () {
                $(this).addClass("dropdown-submenu");
                $(this).removeClass("dropdown-submenu-disabled");
            });
            $(".second-dropdown-menu").each(function () {
                $(this).removeClass("sub-dropdown-menu");
            });
        }
    }


    $("#toggleDisplayConditions").hover(function (eventObject) {
        if (eventObject.type == "mouseenter") {
            $("#oldConditions").css("display", "inline");
        }

        if (eventObject.type == "mouseleave") {
            $("#oldConditions").css("display", "none");
        }

    });

</script>
                    <li role="separator" class="divider Mobile-Only" style="background-color: #eeeeee; height: 1px"></li>
                </ul>


                <span style="cursor: pointer;" onclick="ShowBanner(true);"><i class="fa fa-angle-double-down Show-DesktopMenu" id="showBanner" style="height: 20px; float: right; margin: 9px; display: none; font-size: 24px; color: white"></i></span>
                <ul id="mainnav-right" class="nav navbar-nav navbar-right border-top-mobile" style="padding-left: 15px; padding-bottom: 8px">


            <li><a href="#ExportDIV" data-toggle="modal" data-target="#ExportDIV" onclick="validateExport();">Export</a></li>


                                            <li><a href="#modalID" data-toggle="modal" data-target="#modalID">Help</a></li>
                                        <li id="guestUserLogin" class="Show-MobileMenu hide">
                        <a href=/Tools/Home/LoginUser>
                            Login <span class="glyphicon glyphicon-log-in pull-right"></span>
                        </a>
                    </li>
                    <li class="dropdown dropdown-hover" id="MyAccounts" style="display: none">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">My Account <span class="caret menu-caret"></span></a>
                        <ul id="account-information" class="dropdown-menu mainnav-right-submenu" style="background: #3c3c3c; right: -5px">
                            <li><a href=/Tools/Home/AccountDetails><span class="glyphicon glyphicon-user"></span> Account Details</a></li>
                            <li><a href=/Tools/Home/AccountChangePassword><span class="glyphicon glyphicon-lock"></span> Change Password</a></li>
                            <li><a href=/Tools/Home/NotificationLists><span class="glyphicon glyphicon-th-list"></span> My Subscriptions</a></li>
                            <li><a href=/Tools/Home/WebServiceToken><span class="glyphicon glyphicon-globe"></span> Web Service Token Manager</a></li>
                            <li role="separator" class="divider Show-DesktopMenu"></li>
                            <li><a href="https://dwr.state.co.us/portal/dwr/index"><span class="glyphicon glyphicon-home"></span> Portal Home</a></li>
                            <li><a href="" data-toggle="modal" data-target="#logoutModal"><span class="glyphicon glyphicon-log-out"></span> Sign out</a></li>
                        </ul>
                    </li>
                </ul>


            </div>
        </div>
    </div>

    <div id="messageBox" display="none" style="margin-bottom: 0; padding: 0 !important">
    </div>

    
    <div class="bodyContent" style="padding-bottom: 25px; min-height: 100%; background-color: transparent">
        <script>
    
    $(document).ready(function () {
        resize();
        refreshGrid();
        calcActiveHistoricalFieldDisplay();
    });

</script>









<body>
    <div id="Content" class="container-fluid" style="background-color: white; padding-top: 5px; padding-right: 0px;padding-left: 2px">
<form action="/Tools/AdministrativeCalls/CallSearch/ActiveUrl" id="submitForm" method="get" onsubmit="executeSpinner(this);">            <div id="ExportDIV" class="modal fade" role="dialog">
                <div class="modal-dialog" style="width: 340px">
                    <!--Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">Ã—</span>
                            </button>
                            <h4 class="modal-title" style="text-align: center">
                                Export: Administrative Calls
                            </h4>
                        </div>
                        <div class="modal-body">
                            <div style="padding-left: 15px">
                                Administrative calls search result  <br>
                                <div>
                                    <table style="padding: 5px;float: left">
                                        <tr>
                                            <td>
                                                Record count:
                                                <strong><font id="recordCountMetadata" style="color: black">116 </font></strong>
                                            </td>
                                        </tr>

                                    </table>
                                </div>
                                <br /> <br />
                                <center>
                                    <button type="submit" name="submitButton" value="Export" title="Export..." class="btn-dwr btn-dwr-nograd" onclick="$('#ExportDIV').modal('hide');">
                                        Export
                                    </button>
                                </center>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn-dwr " data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="leftSectionContent" class="col-left-search leftSectionContent710" style="float: left; padding-left: 2px; padding-right: 2px;padding-bottom: 8px">
                <div id="searchPanelContent" class="panel panel-default">
                    <div class="panel-heading panel-heading-search">
                        <div>
                            <div style="float: right">
                                <a id="hideSearch" href="#" class="expand">Hide</a>
                            </div>
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#baseCriteriaDivSearch">Search Fields </a>
                            </h4>
                        </div>
                    </div>
                    <div class="collapse in" id="baseCriteriaDivSearch">
                        <div style="padding: 5px">
                            <table style="width: 100%">
                                <tr>
                                    <td align="left" style="width:50%"><label data-fieldName="SelectedGeoValue" class='stylewithHelp' style='font-weight: normal' title='Select type of geographic boundary to search'>Geographic Location</label></td>
                                    <td align="right" style="width:50%">
                                        <select class="search-height form-control" id="SelectedGeoValue" name="SelectedGeoValue" onchange="showHide(this)"><option selected="selected" value="waterDivisionDiv">Water Division</option>
</select>
                                    </td>
                                </tr>
                            </table>
                            <div id="t">
                                <div id="waterDivisionDiv" class="monoSelect">
                                    <table style="width:100%">
                                        <tr>
                                            <td style="width: 100%">
                                                <select class="search-height form-control" data-val="true" data-val-number="The field SelectedWaterDivisionId must be a number." data-val-required="The SelectedWaterDivisionId field is required." id="SelectedWaterDivisionId" name="SelectedWaterDivisionId" style="width:100%"><option selected="selected" value="0">All Divisions</option>
<option value="1">1 - South Platte</option>
<option value="2">2 - Arkansas</option>
<option value="3">3 - Rio Grande</option>
<option value="4">4 - Gunnison</option>
<option value="5">5 - Colorado</option>
<option value="6">6 - Yampa/White</option>
<option value="7">7 - San Juan/Dolores</option>
</select>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <table id="tbldates" style="width: 100%; display:none">
                                <tr>
                                    <td style="width: 25px; padding-right: 10px">
                                        <label data-fieldName="StartDate" class='stylewithHelp' style='font-weight: normal' title='Beginning Date'>From</label>
                                    </td>
                                    <td style="width: 75px;">
                                        

<div class="editor-field" style="line-height: 13px;">
    <input class="search-height form-control" data-val="true" data-val-date="The field From must be a date." id="StartDate" name="StartDate" style="width:100px; text-align: center" type="text" value="" />
</div>

<script type="text/javascript">
    $(document).ready(function () {
        var input = $("#StartDate");
        input.datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yyyy',
            gotoCurrent: true,
            todayHighlight: true,
            autoclose: true,
            orientation: 'bottom',
            startDate: new Date(1800, 0, 1),
            endDate: new Date()
        });
        input.attr('autocomplete', 'off');
    });


</script>

                                    </td>
                                    <td style="width: 25px; padding-left: 25px; padding-right: 10px">
                                        <label data-fieldName="EndDate" class='stylewithHelp' style='font-weight: normal' title='End Date'>To</label>
                                    </td>
                                    <td>
                                        

<div class="editor-field" style="line-height: 13px;">
    <input class="search-height form-control" data-val="true" data-val-date="The field To must be a date." id="EndDate" name="EndDate" style="width:100px; text-align: center" type="text" value="" />
</div>

<script type="text/javascript">
    $(document).ready(function () {
        var input = $("#EndDate");
        input.datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yyyy',
            gotoCurrent: true,
            todayHighlight: true,
            autoclose: true,
            orientation: 'bottom',
            startDate: new Date(1800, 0, 1),
            endDate: new Date()
        });
        input.attr('autocomplete', 'off');
    });


</script>

                                    </td>
                                </tr>
                            </table>
                        </div>


<script>
    $(document).ready(function () {
        reloadshowHideAdditional(
            document.getElementById('SelectedAdditionalValue')
        );
    })
</script>

<div id="additionalSearch" class="collapse in" style="border-top: 1px solid #eee;">
    <div style="padding: 5px">
        <table style="width:100%;">
            <tr>
                <td><label data-fieldName="SelectedAdditionalValue" class='stylewithHelp' style='font-weight: normal' title='Additional search criteria, ADDED to above filters'>More Options</label></td>
                <td>
                    <select class="search-height form-control" id="SelectedAdditionalValue" name="SelectedAdditionalValue" onchange="showHideAdditional(this)" style="width:100%; min-width:177px"><option value="">Select</option>
<option value="adminscenariodiv">Admin Scenario</option>
<option value="LocationStructNameDiv">Location Structure Name</option>
<option value="locationwdidDiv">Location WDID</option>
<option value="AdminNoDiv">Priority Admin No</option>
<option value="DateDiv">Priority Date</option>
<option value="PriorityStructNameDiv">Priority Structure Name</option>
<option value="PriorityWDIDDiv">Priority WDID</option>
<option value="watersourcediv">Water Source</option>
</select>
                </td>
            </tr>
        </table>
    </div>

    <div class="panel-body" style="padding: 0;">
        <div id="watersourcediv" class="monoSelectAdd" style="display:none">
            

<div style="padding: 0 5px 0 5px !important;">
    <select class="form-control search-height" id="WaterSourceDropdownSearch_WaterSourceName" name="WaterSourceDropdownSearch.WaterSourceName"></select>
    <div id="Tributaries" style="text-align: center;">
        <label style="font-weight: normal; margin-bottom: 0 !important; margin-top: 4px; cursor: help;"
               title="Check this to include streams that are tributaries to your selected water source">
            <input data-val="true" data-val-required="The IncludeTributaries field is required." id="WaterSourceDropdownSearch_IncludeTributaries" name="WaterSourceDropdownSearch.IncludeTributaries" style="vertical-align: text-bottom;" type="checkbox" value="true" /><input name="WaterSourceDropdownSearch.IncludeTributaries" type="hidden" value="false" />&nbsp; Include Tributaries
        </label>
    </div><input data-val="true" data-val-number="The field DbSetNum must be a number." data-val-required="The DbSetNum field is required." id="WaterSourceDropdownSearch_DbSetNum" name="WaterSourceDropdownSearch.DbSetNum" type="hidden" value="1" />

    <script>
        $(document).ready(function () {
            setTimeout(function () {
                fillWaterSourceDropDown(getBoundary());
            }, 2000);
        });
        $(document).on("change", "#SelectedWaterDivisionId,#SelectedWaterDistrictId", function() {
            fillWaterSourceDropDown(getBoundary());
        });
        var timesWaterSourceRetrieved = 0;

        function getBoundary() {
            var geoValueElem = document.getElementById('SelectedGeoValue');
            var boundary;
            var geoValue = geoValueElem.value;
            geoValue = geoValue != null ? geoValue.toString().toLowerCase() : null;
            if (geoValue != null && geoValue.indexOf("water") > -1 && geoValue.indexOf("division") > -1) {
                boundary = document.getElementById('SelectedWaterDivisionId').value;
            } else if (geoValue != null && geoValue.indexOf("water") > -1 && geoValue.indexOf("district") > -1) {
                boundary = document.getElementById('SelectedWaterDistrictId').value;
            } else {
                boundary = document.getElementById('SelectedCountyId').value;
            }
            return boundary;
        }
        (function () {
            let isRunning = false;
            window.fillWaterSourceDropDown = function (boundarySelection) {
                var geoSelection = document.getElementById('SelectedGeoValue').value;
                var waterSourceDropdown = $("#WaterSourceDropdownSearch_WaterSourceName");
                if (boundarySelection == 0) {
                    if ('Active' == "Historical" || 'Active' == "Active")
                        waterSourceDropdown.html("<option>Choose Water Division Above</option>");
                    else
                        waterSourceDropdown.html("<option>Choose Water Division or District Above</option>");
                } else {
                    if (isRunning !== true) {
                        isRunning = true;
                        waterSourceDropdown.html("<option value='loading'>Loading...</option>"); // clear before appending new list
                        var data = {
                            boundary: boundarySelection,
                            geo: geoSelection,
                            dataset: 1,
                        };
                        $.ajax({
                            url: '/Tools/SessionlessSharedResources/GetWaterSourceNames',
                            type: "GET",
                            dataType: "JSON",
                            data: data,
                            success: function (result) {
                                var html = "";
                                $.each(result, function (i, waterSourceName) {
                                    var curOption = "<option value='" + waterSourceName.gnis_id + "' >" + waterSourceName.GNIS_Name + " [" + waterSourceName.gnis_id + "] " + "(" + waterSourceName.wd_list + ")</option>'";
                                    html += curOption;
                                });
                                if (html.length === 0) {
                                    html = "<option value='error'>Error occurred</option>";
                                }
                                waterSourceDropdown.html(html);
                                if (timesWaterSourceRetrieved === 0) {
                                    var url = window.location.href;
                                    var name = "WaterSourceDropdownSearch.WaterSourceName".replace(/[\[\]]/g, '\\$&');
                                    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
                                    var results = regex.exec(url);
                                    if (!results) return;
                                    if (!results[2]) return;
                                    var startingName = decodeURIComponent(results[2].replace(/\+/g, ' '));
                                    var toSelect = waterSourceDropdown.find('[value="' + startingName + '"]');
                                    if (toSelect.length > 0) {
                                        waterSourceDropdown.val(toSelect.val());
                                    }
                                }
                                timesWaterSourceRetrieved++;
                            },
                            error: function (ex) {
                                waterSourceDropdown.html("<option value='error'>Error occurred</option>");
                            }
                        }).always(function (e) { isRunning = false; });
                    }
                }

            }
        }());
        
    </script>
</div>
        </div>
    </div>

    <div class="panel-body" style="padding: 0; float: right; margin-bottom: 10px">
       

       
        <div id="adminscenariodiv" class="monoSelectAdd" style="display:none">
              
            <table>
        <tr>
            <td class="search-height" style="width:50px"></td>
            <td  class="search-height" ><select class="search-height form-control" data-val="true" data-val-required="The AdminScenarioDropDown field is required." id="AdminScenarioSearch_AdminScenarioDropDown" name="AdminScenarioSearch.AdminScenarioDropDown" style="width:100%"><option selected="selected" value="0">AUTHORIZED DIVERSION</option>
<option value="1">CALL</option>
<option value="2">FUTILE CALL</option>
<option value="3">NONCONSUMPTIVE CALL</option>
</select></td>
        </tr>
</table>
        </div>
        <div id="locationwdidDiv" class="monoSelectAdd" style="display:none">

               
<table>
    
    <tr>       
        
        <td class="search-height">From</td>
        <td class="search-height"><input class="search-height form-control text-box single-line" id="LocationWDIDSearch_wdidFrom" maxlength="7" name="LocationWDIDSearch.wdidFrom" style="max-width:80px" type="number" value="" /></td> 
        <td class="search-height" style="padding-left:25px">To</td>
        <td class="search-height"><input class="search-height form-control text-box single-line" id="LocationWDIDSearch_wdidTo" name="LocationWDIDSearch.wdidTo" style="max-width:80px" type="number" value="" /></td>
        <td  class="search-height">(Optional)</td>
        
    </tr>
</table>
<div id="includeAssociatedWaterRights" style="display: none; float: right; padding: 8px 67px 0 0">
    <input data-val="true" data-val-required="The Include Associated Water Rights field is required." id="LocationWDIDSearch_includeAssociatedWaterRights" name="LocationWDIDSearch.includeAssociatedWaterRights" type="checkbox" value="true" /><input name="LocationWDIDSearch.includeAssociatedWaterRights" type="hidden" value="false" />
    Include Associated Water Rights
</div>

<script>
    $("#WDIDSearch_wdidFrom").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });

    $("#WDIDSearch_wdidTo").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });
    function getSelectedText() {
        var text = "";
        if (typeof window.getSelection != "undefined") {
            text = window.getSelection().toString();
        } else if (typeof document.selection != "undefined" && document.selection.type == "Text") {
            text = document.selection.createRange().text;
        }
        return text;
    }


</script>


        </div>
        <div id="LocationStructNameDiv" class="monoSelectAdd" style="display:none">
            <style>
    .MakeTall {
        height: 21.53px;
        width: 70px;
    }
</style>

<table cellspacing="0" cellpadding="0" style="width:100%">
    
    <tr>
        <td class="search-height"  style="float:right;padding-right:5px"><select class="search-criteria-combo form-control" data-val="true" data-val-required="The Operator field is required." id="LocationStructNameSearch_Operator" name="LocationStructNameSearch.Operator"><option value="3">Equals</option>
<option selected="selected" value="0">Starts With</option>
<option value="1">Contains</option>
<option value="2">Ends With</option>
</select></td>
        <td class="search-height"  style="width:160px"><input class="search-height form-control text-box single-line" id="LocationStructNameSearch_calling_structure" name="LocationStructNameSearch.calling_structure" style="max-width:155px" type="text" value="" /></td>        
    </tr>
</table>

        </div>

        <div id="PriorityWDIDDiv" class="monoSelectAdd" style="display:none">

               
<table>
    
    <tr>       
        
        <td class="search-height">From</td>
        <td class="search-height"><input class="search-height form-control text-box single-line" id="WDIDSearch_wdidFrom" maxlength="7" name="WDIDSearch.wdidFrom" style="max-width:80px" type="number" value="" /></td> 
        <td class="search-height" style="padding-left:25px">To</td>
        <td class="search-height"><input class="search-height form-control text-box single-line" id="WDIDSearch_wdidTo" name="WDIDSearch.wdidTo" style="max-width:80px" type="number" value="" /></td>
        <td  class="search-height">(Optional)</td>
        
    </tr>
</table>
<div id="includeAssociatedWaterRights" style="display: none; float: right; padding: 8px 67px 0 0">
    <input data-val="true" data-val-required="The Include Associated Water Rights field is required." id="WDIDSearch_includeAssociatedWaterRights" name="WDIDSearch.includeAssociatedWaterRights" type="checkbox" value="true" /><input name="WDIDSearch.includeAssociatedWaterRights" type="hidden" value="false" />
    Include Associated Water Rights
</div>

<script>
    $("#WDIDSearch_wdidFrom").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });

    $("#WDIDSearch_wdidTo").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });
    function getSelectedText() {
        var text = "";
        if (typeof window.getSelection != "undefined") {
            text = window.getSelection().toString();
        } else if (typeof document.selection != "undefined" && document.selection.type == "Text") {
            text = document.selection.createRange().text;
        }
        return text;
    }


</script>


            
        </div>

        <div id="PriorityStructNameDiv" class="monoSelectAdd" style="display:none">
            <style>
    .MakeTall {
        height: 21.53px;
        width: 70px;
    }
</style>

<table cellspacing="0" cellpadding="0" style="width:100%">
    <tr>
        <td  class="search-height" style="float:right;padding-right:5px"><select class="search-criteria-combo form-control" data-val="true" data-val-required="The Operator field is required." id="PriorityStructNameSearch_Operator" name="PriorityStructNameSearch.Operator"><option value="3">Equals</option>
<option selected="selected" value="0">Starts With</option>
<option value="1">Contains</option>
<option value="2">Ends With</option>
</select></td>
        <td  class="search-height" style="width:160px"><input class="search-height form-control text-box single-line" id="PriorityStructNameSearch_waterright_structure" name="PriorityStructNameSearch.waterright_structure" style="width:155px" type="text" value="" /></td>
    </tr>
</table>

        </div>
        <div id="DateDiv" class="monoSelectAdd" style="display: none">
            <style>
    .MakeTall {
        height: 21.53px;
        width: 70px;
    }
</style>

<table cellspacing="0" cellpadding="0" style="width:100%">
    <tr>
        <td class="search-height"  style="width: 25px; padding-left: 25px; padding-right: 10px">
            From
        </td>
        <td class="search-height" >
            <input class="search-height form-control datepicker" data-val="true" data-val-date="The field From must be a date." id="PriorityDateSearch_priority_date_from" name="PriorityDateSearch.priority_date_from" style="width:100px; text-align: center" type="text" value="" />
        </td>
        <td class="search-height" style="width: 25px; padding-right: 10px">
            To
        </td>
        <td class="search-height" style="width: 75px;">
            <input class="search-height form-control datepicker" data-val="true" data-val-date="The field To must be a date." id="PriorityDateSearch_priority_date_to" name="PriorityDateSearch.priority_date_to" style="width:100px; text-align: center" type="text" value="" />
        </td>

    </tr>
</table>

<script type="text/javascript">
    $(document).ready(function () {
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yyyy',
            gotoCurrent: true,
            todayHighlight: true,
            autoclose: true,
            orientation: 'bottom',
            startDate: new Date(1800, 1, 1),
            endDate:new Date()
        });
        $("#PriorityDateSearch_priority_date_to").datepicker("setDate", $("#PriorityDateSearch_priority_date_to").val().substring(0, 10));
        $("#PriorityDateSearch_priority_date_from").datepicker("setDate", $("#PriorityDateSearch_priority_date_from").val().substring(0, 10));
    });

</script>

        </div>

        <div id="PriorityAmountDiv" class="monoSelectAdd" style="display: none">
            <style>
    .MakeTall {
        height: 21.53px;
        width: 70px;
    }
</style>

<table cellspacing="0" cellpadding="0" style="width:100%">
    <tr>
        <td class="search-height"  style="float:right;padding-right:5px"><select class="search-criteria-combo form-control" data-val="true" data-val-required="The Operator field is required." id="PriorityAmountSearch_Operator" name="PriorityAmountSearch.Operator"><option selected="selected" value="0">=</option>
<option value="1">&gt;</option>
<option value="2">&gt;=</option>
<option value="3">&lt;</option>
<option value="4">&lt;=</option>
</select></td>
        <td class="search-height"  style="width:160px"><input class="search-height form-control text-box single-line" data-val="true" data-val-number="The field Priority Amount must be a number." id="PriorityAmountSearch_priority_amount" name="PriorityAmountSearch.priority_amount" style="width:155px" type="text" value="" /></td>
    </tr>
</table>

        </div>
        <div id="AdminNoDiv" class="monoSelectAdd" style="display: none">
            <style>
    .MakeTall {
        height: 21.53px;
        width: 100px;
    }
</style>
<table cellspacing="0" cellpadding="0" style="width:100%">
    
    <tr>
        <td class="search-height" style="float:right;padding-right:5px"><select class="search-criteria-combo form-control" data-val="true" data-val-required="The Operator field is required." id="PriorityAdminNoSearch_Operator" name="PriorityAdminNoSearch.Operator" style="width:165px"><option selected="selected" value="0">Equals</option>
<option value="1">Greater than</option>
<option value="2">Greater than or equal to</option>
<option value="3">Less than</option>
<option value="4">Less than or equal to</option>
</select></td>    
        <td class="search-height" style="width:160px"><input class="search-height form-control text-box single-line" data-val="true" data-val-number="The field InputNumber must be a number." id="PriorityAdminNoSearch_InputNumber" name="PriorityAdminNoSearch.InputNumber" step="any" style="width:140px" type="number" value="" /></td>
    </tr>
</table>
<Script>
    $("#PriorityAdminNoSearch_InputNumber").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 11) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 11;
    });
    $("#NetAbsoluteSearch_InputNumber").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 11) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 11;
    });
    $("#NetConditionalSearch_InputNumber").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 11) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 11;
    });
    $("#NetApexConditionalSearch_InputNumber").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 11) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 11;
    });
    $("#NetApexAbsoluteSearch_InputNumber").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 11) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 11;
    });
    function getSelectedText() {
        var text = "";
        if (typeof window.getSelection != "undefined") {
            text = window.getSelection().toString();
        } else if (typeof document.selection != "undefined" && document.selection.type == "Text") {
            text = document.selection.createRange().text;
        }
        return text;
    }
</Script>
        </div>
        <div id="validationSummary" style="display: none; padding: 0 20px 0 0">
            <br />
            <div class="validation-summary-valid text-danger" data-valmsg-summary="true"><ul><li style="display:none"></li>
</ul></div>
           
        </div>
      
    </div>
    <div style="clear:both"></div>
</div>


<script>

    //Show / Hides Date Time Released and Set Comments When Historical calls


    

    function showHideAdditional(control) {
        if (control.value == "watersourcediv") {
            $("#SelectedAdditionalValue").attr("title", "Select Water Division or District to search by Water Source");
        }
        else
            $("#SelectedAdditionalValue").removeAttr("title");
        try {
            var cntlArray = document.getElementsByClassName('monoSelectAdd');
            for (i = 0; i < cntlArray.length; i++) {
                if (control.value == cntlArray[i].id){
                    cntlArray[i].style.display = 'block';
                    //document.getElementById('validationSummary').style.display = "block";
                    //if (control.value == "coordinatesBufferDiv") {
                    //    var utmTable = document.getElementById('utmTable').style.display = "block";
                    //    document.getElementById('polarTable').style.display = "none";
                    //}
                }
                else{
                    cntlArray[i].style.display = 'none';
                }
            }

        } catch (err) {
            alert(err);
        }
        refreshGrid();
        document.getElementById('validationSummary').style.display = 'none';
        $('.datepicker').attr('autocomplete', 'off');
    }

    function resetAdditionalFields() {
    }

    function reloadshowHideAdditional(control) {
        try {
            document.getElementById('validationSummary').style.display = "none";
            var cntlArray = document.getElementsByClassName('monoSelectAdd');
            for (i = 0; i < cntlArray.length; i++) {
                if (control.value == cntlArray[i].id) {
                    cntlArray[i].style.display = 'block';
                    if ((false).toString() == 'true') {
                        document.getElementById('validationSummary').style.display = "block";
                    }
                }
                else {
                    cntlArray[i].style.display = 'none';
                }
            }

        } catch (err) {
            alert(err);
        }
    }
    $("#PriorityDateSearch_priority_date_to").attr('autocomplete', 'off');
    $("#PriorityDateSearch_priority_date_from").attr('autocomplete', 'off');
</script>

                        <center>
                            
                            <button id="buttonSearch" type="submit" class="btn-dwr btn-dwr-nograd" name="submitButton" value="Submit" onclick="Clicked(this);">Search</button>
                        </center>

                    </div>
                </div>


                <div id="additionalResourceContent" class="panel panel-default">
                    <div class="panel-heading panel-heading-search">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#AdditionalResourceDiv">Additional Resources</a>
                        </h4>
                    </div>
                    <div id="AdditionalResourceDiv" class="collapse in">
                        <div style="padding: 10px">
                            <div><a href="https://dwr.colorado.gov/services/water-administration" target="_blank">About Colorado Water Administration</a></div>
                            <div style="display: none" id="ActiveLink"><a href="/Tools/AdministrativeCalls/Active">Active Calls</a></div>
                            <div style="display: none" id="HistoricalLink"><a href="/Tools/AdministrativeCalls/Historical">Historical Calls</a></div>
                            <div><a href="/Tools/AdministrativeCalls/StructureCalls">Structure Call Analysis</a></div>
                            <div><a href="/Tools/AdministrativeCalls/WaterSourceCalls">Water Source Call Analysis</a></div>
                            <div id="AdminCallsCIM"><a href="https://data.colorado.gov/Water/DWR-Active-Calls/x5a5-6sqv" target="_blank">Colorado Information Marketplace</a></div>
                            <div><a href="https://dwr.state.co.us/rest/get/" target="_blank">DWR Web Services</a></div>
                            <div><a href="https://dwr.state.co.us/portal/dwr/index" style="margin-top:5px">DNR Portal</a></div>
                        </div>
                    </div>
                </div>
            </div>
</form>        <!-- Modal -->
        <div id="mapOptionsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->.
                <div class="modal-content" style="max-width:426px">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" style="text-align:center">Map Options</h4>
                    </div>
                    <div class="modal-body">
                        <style type="text/css">
                            #bootstrapSelectForm .selectContainer .form-control-feedback {
                                right: -15px;
                            }
                        </style>

                        <form id="bootstrapSelectForm" method="post" class="form-horizontal">
                            <div class="form-group">
                                <table align="center">
                                    <tr>
                                        <td style="width:120px">Label Field</td>
                                        <td>
                                            <select name="label" class="form-control search-height" id="LabelDropdown" style="max-width:225px">
                                                <option value=""></option>
                                                <option value="Admin Scenario">Admin Scenario</option>
                                                <option value="Date Time Set">Date Time Set</option>
                                                <option value="Date Time Released">Date Time Released</option>
                                                <option value="Water Source">Water Source</option>
                                                <option value="Location WDID">Location WDID</option>
                                                <option value="Location Structure Name">Location Structure Name</option>
                                                <option value="Priority WDID">Priority WDID</option>
                                                <option value="Priority Structure Name">Priority Structure Name</option>
                                                <option value="Priority Admin No">Priority Admin No</option>
                                                <option value="Priority Date">Priority Date</option>
                                                <option value="Priority No">Priority No</option>
                                                <option value="Location Structure Name (WDID)">Location Structure Name (WDID)</option>
                                                <option value="Priority Date (Admin No)">Priority Date (Admin No)</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Hover Field</td>

                                        <td>
                                            <select name="hover" class="form-control  search-height" id="Hoverrdropdown" style="max-width:225px">
                                                <option value=""></option>
                                                <option value="Admin Scenario">Admin Scenario</option>
                                                <option value="Date Time Set">Date Time Set</option>
                                                <option value="Date Time Released">Date Time Released</option>
                                                <option value="Water Source">Water Source</option>
                                                <option value="Location WDID">Location WDID</option>
                                                <option value="Location Structure Name">Location Structure Name</option>
                                                <option value="Priority WDID">Priority WDID</option>
                                                <option value="Priority Structure Name">Priority Structure Name</option>
                                                <option value="Priority Admin No">Priority Admin No</option>
                                                <option value="Priority Date">Priority Date</option>
                                                <option value="Priority No">Priority No</option>
                                                <option selected value="Location Structure Name (WDID)">Location Structure Name (WDID)</option>
                                                <option value="Priority Date (Admin No)">Priority Date (Admin No)</option>
                                            </select>

                                        </td>
                                    </tr>

                                </table>
                            </div>

                            <div class="form-group">
                                <div style="width:107%;margin: 0;text-align: center;">
                                    <input type="button" value="Apply" data-dismiss="modal" class="btn-dwr" id="ApplyMapRefresh" />
                                    <input type="button" value="Cancel" data-dismiss="modal" class="btn-dwr" id="Cancel">
                                </div>
                            </div>
                        </form>

                    </div>
                </div>

            </div>
        </div>
        <div id="loading">
            <div id="loadingcont">
                <p id="loadingspinr">
                </p>
            </div>
        </div>
        <div id="rightSectionContent" style="min-width: 320px; overflow: auto; padding-left: 7px; padding-right: 7px; display:none">


<style>
    .k-ghost-splitbar {
        z-index: 3000 !important;
    }

    #leftSectionContent .panel:last-of-type {
        margin-bottom: 10px;
    }

    .resizableChildren .k-splitbar {
        background-color: #35617e;
        color: white;
    }

        .resizableChildren .k-splitbar .k-resize-handle {
            display: none;
            background-color: transparent;
            color: #35617e;
        }

    tr.k-state-selected a {
        color: white;
    }

    #splitPaneTopBar > * {
        display: inline-block;
    }

    #splitPaneTopBar > .form-control {
        display: inline-block;
        height: auto;
        width: auto;
        padding: initial;
    }

        #splitPaneTopBar > .form-control:not(button) {
            padding: 0px 4px;
        }

    #splitPaneTopBar > button {
        padding: 2px 6px;
    }

        #splitPaneTopBar > button.splitterPaneToggler.off {
            padding: 1px 6px;
            border: 1px solid black;
            background-color: lightgray;
            color: black;
        }

    .splitterPaneToggler.off {
    }

    .splitterPaneToggler:not(:last-of-type) {
        margin-right: 4px;
    }

    .splitterPaneToggler:last-of-type {
        margin-right: 10px;
    }

    .splitterPaneToggler:focus {
        outline: none;
        box-shadow: none;
    }

    #loading {
        z-index: 2500;
    }

    .k-grid .k-selectable {
        cursor: pointer
    }

    .k-grid-header th.k-header > .k-link {
        line-height: 1.2;
    }

    .kendoGridSettingsToolbar .k-dropdown .k-input {
        padding: 0;
    }

    .k-grid .k-grid-toolbar.kendoGridSettingsToolbar, .kendoGridSettingsToolbar {
        padding: 2px 13px 3px 13px;
    }

        .k-grid .k-grid-toolbar.kendoGridSettingsToolbar .k-dropdown .k-select {
            position: absolute;
        }

            .k-grid .k-grid-toolbar.kendoGridSettingsToolbar .k-dropdown .k-select > .k-icon {
                bottom: 10%;
            }

    .k-grid .k-grid-pager select.k-dropdown {
        padding: 0;
        text-align: center;
        text-align-last: center;
    }

    .iconButton {
        margin-left: 4px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

        .iconButton:hover {
            border-color: #ccc;
            background: #ebebeb;
        }

        .iconButton .k-icon {
            margin: 1px 2px;
        }

            .iconButton .k-icon.k-i-flip-horizontal {
                top: -1px;
            }

            .iconButton .k-icon.k-i-flip-vertical {
                left: 1px;
            }

    #splitPaneLayout option:nth-child(even):not(:hover) {
        background: #e4edff;
    }

    .hideMyChildren > * {
        display: none !important;
    }

    .hideOnOnly.onlyOneSelectedIsTrue {
        display: none !important;
    }

    .k-flip-h-and-rotate-ninety {
        -webkit-transform: scaleX(-1) rotate(90deg);
        -ms-transform: scaleX(-1) rotate(90deg);
        transform: scaleX(-1) rotate(90deg);
    }

    .k-flip-h-and-rotate-neg-ninety {
        -webkit-transform: scaleX(-1) rotate(-90deg);
        -ms-transform: scaleX(-1) rotate(-90deg);
        transform: scaleX(-1) rotate(-90deg);
    }

    .rotate-ninety {
        -webkit-transform: rotate(90deg);
        -ms-transform: rotate(90deg);
        transform: rotate(90deg);
    }

    .rotate-neg-ninety {
        -webkit-transform: rotate(-90deg);
        -ms-transform: rotate(-90deg);
        transform: rotate(-90deg);
    }

    .iconButton img {
        margin: 2px;
    }

    .k-loading-mask {
        z-index: 2400;
    }

        .k-loading-mask .k-loading-image {
            z-index: 2400;
        }

    #splitPaneTopBar > * {
        vertical-align: top;
    }

    #splitPaneTopBar > .iconButton {
        line-height: 1;
    }

    .leaflet-control-layers-list > .buttonForLayerToLoad {
        width: calc(100% - 36px);
    }

    .resizableChildren.k-splitter .k-splitbar .k-icon {
        font-size: 13px;
    }

    .resizableChildren.k-splitter .k-splitbar-vertical .k-icon {
        height: 13px;
        transform: scale(2.4, 1.2);
    }

    .resizableChildren.k-splitter .k-splitbar-horizontal .k-icon {
        width: 13px;
        transform: scale(1.2, 2.4);
    }

    .resizableChildren.k-splitter .k-splitbar-vertical, .resizableChildren.k-splitter .k-ghost-splitbar-vertical {
        height: 8px;
    }

    .resizableChildren.k-splitter .k-splitbar-horizontal, .resizableChildren.k-splitter .k-ghost-splitbar-horizontal {
        width: 8px;
    }
</style>

<style>
    .onoffswitch {
        position: relative;
        width: 59px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .onoffswitch-checkbox {
        display: none;
    }

    .onoffswitch-label {
        display: block;
        overflow: hidden;
        cursor: pointer;
        border: 2px solid #999999;
        border-radius: 16px;
    }

    .onoffswitch-inner, .showhideswitch-inner {
        display: block;
        width: 200%;
        margin-left: -100%;
        transition: margin 0.3s ease-in 0s;
    }

        .onoffswitch-inner:before, .onoffswitch-inner:after, .showhideswitch-inner:before, .showhideswitch-inner:after {
            display: block;
            float: left;
            width: 50%;
            height: 16px;
            padding: 0;
            line-height: 16px;
            font-size: 14px;
            color: white;
            font-family: Trebuchet, Arial, sans-serif;
            font-weight: bold;
            box-sizing: border-box;
        }

        .onoffswitch-inner:before {
            content: "ON";
            padding-left: 12px;
            background-color: #009439;
            color: #FFFFFF;
        }

        .onoffswitch-inner:after {
            content: "OFF";
            padding-right: 10px;
            background-color: #EEEEEE;
            color: #999999;
            text-align: right;
        }

    .showhideswitch {
        position: relative;
        width: 75px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .showhideswitch-inner:before {
        content: "SHOWN";
        padding-left: 8px;
        background-color: #009439;
        color: #FFFFFF;
    }

    .showhideswitch-inner:after {
        content: "HIDDEN";
        padding-right: 7px;
        background-color: #EEEEEE;
        color: #999999;
        text-align: right;
    }

    .onoffswitch-switch {
        display: block;
        width: 10px;
        margin: 3px;
        background: #FFFFFF;
        position: absolute;
        top: 0;
        bottom: 0;
        right: 39px;
        border: 2px solid #999999;
        border-radius: 16px;
        transition: all 0.3s ease-in 0s;
    }

    .showhideswitch-switch {
        display: block;
        width: 10px;
        margin: 3px;
        background: #FFFFFF;
        position: absolute;
        top: 0;
        bottom: 1px;
        right: 55px;
        border: 2px solid #999999;
        border-radius: 16px;
        transition: all 0.3s ease-in 0s;
    }

    .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner, .onoffswitch-checkbox:checked + .onoffswitch-label .showhideswitch-inner {
        margin-left: 0;
    }

    .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch, .onoffswitch-checkbox:checked + .onoffswitch-label .showhideswitch-switch {
        right: 3px;
    }

    #showHideTable td {
        padding: 0;
    }

    #searchDisplayOptions label {
        margin: 0;
    }

    .resizableChildren .hideLoadingBarForNow .k-loading-mask {
        display: none;
    }
</style>
<script>
    $(window).on("resize", function (e) {
        if (typeof window.pageResize === "function") {
            window.pageResize.apply(this, arguments);
        }
    });

	$(document).ready(function() {
        const localStoragePropertyName = getKendoWidgetForMapJQuerySelector() + "_panesPref";
		window.getSavedPanesInfo = function() {
            try {
                let item = localStorage.getItem(localStoragePropertyName);
                if (item != null && item.length > 0) {
                    return JSON.parse(item);
                }
            }
            catch (e) {
                console.log("Error using localStorage");
                console.log(e);
            }
            if (typeof window.getDefaultSavedPanesWindows === "function") {
                return window.getDefaultSavedPanesWindows();
            }
            return null;
        }
        window.savePanesInfo = function () {
            let elem = $(".resizableChildren");
            if (elem.length > 0 && storageAvailable("localStorage")) {
                let splitter = elem.data("kendoSplitter");
                let paneOpts = splitter.options.panes;
                let panes = elem.find(">.k-pane");
                let paneInfos = {};
                let paneSizes = [];
                let totalPaneSize = 0;
                for (let i = 0; i < paneOpts.length; i++) {
                    let paneOpt = paneOpts[i];
                    let name = $(panes[i]).attr("data-pane-name");
                    if (name != null) {
                        let size = parseInt(paneOpt.size);
                        paneInfos[name] = { ord: i, clpsd: paneOpt.collapsed };
                        if (isNaN(size)) totalPaneSize = null;
                        else {
                            totalPaneSize += size;
                            paneSizes.push({ name: name, size: size });
                        }
                    }
                }
                for (let i = 0; i < paneSizes.length; i++) {
                    let paneSize = paneSizes[i];
                    if (paneSize.name != null && paneSize.size != null) {
                        let size = (paneSize.size / totalPaneSize) * 100;
                        paneInfos[paneSize.name].size = size.toFixed(3) + "%";
                    }
                }
                try {
                    localStorage.setItem(localStoragePropertyName, JSON.stringify(paneInfos));
                }
                catch (e) {
                    console.log("Error using localStorage");
                    console.log(e);
                }
            }
		}
	});
	$(document).ready(function() {
		const topBottom = false;
		const leftRight = true;
        const autoBasedOnWindowSize = null;
        const useSplitPaneHeightAndWidth = true;
        const autoResizeHeightModifier = 1.25;
        //Returns true if the width is significantly larger than the height;
        const autoResizeShouldSplitHorizontalFunc = function (width, height) {
            return height * autoResizeHeightModifier < width;
        }
        const notAnOrientation = "I'm definitely not an orientation";
        const localStoragePropertyName = getKendoWidgetForMapJQuerySelector() + "_orientationPref";
        let orientation = (storageAvailable("localStorage") && localStorage.hasOwnProperty(localStoragePropertyName)
            ? JSON.parse(localStorage.getItem(localStoragePropertyName))
            : notAnOrientation
        );
        if (orientation !== topBottom && orientation !== leftRight && orientation !== autoBasedOnWindowSize) orientation = topBottom;
        else {
            let dict = {};
            dict[topBottom] = "topbottom";
            dict[leftRight] = "leftright";
            dict[autoBasedOnWindowSize] = "basedonscreen";
            $("#splitPaneLayout").val(dict[orientation]);
        }
        let setLocalStorageOrientation = function () {
            try {
                if (storageAvailable("localStorage")) {
                    localStorage.setItem(localStoragePropertyName, JSON.stringify(orientation))
                }
            }
            catch (e) {
                console.log("Error using localStorage");
                console.log(e);
            }
        };
        let onOrientationChange = function () {
            let useSpinner = false && typeof loadSpinner === "function" && typeof stopSpinner === "function";
            if (useSpinner)  {
				loadSpinner();
				setTimeout(function () {
					setUpSplitter();
					if (useSpinner) stopSpinner();
				}, 150);
			}
			else {
				setUpSplitter();
			}
            setLocalStorageOrientation();
        }
        window.toggleSplitOrientationTopBottomToLeftRight = function () {
            orientation = orientation == topBottom ? leftRight : topBottom;
            onOrientationChange();
		}
		window.getSplitOrientationIsTopBottom = function() {
            return orientation === topBottom;
		}
		window.getSplitOrientationIsLeftRight = function() {
            return orientation === topBottom;
		}
		window.setSplitOrientationTopBottom = function() {
            orientation = topBottom;
            onOrientationChange();
		}
		window.setSplitOrientationLeftRight = function() {
			orientation = leftRight;
            onOrientationChange();
		}
		window.setSplitOrientationBasedOnWindowSize = function() {
			orientation = autoBasedOnWindowSize;
            onOrientationChange();
        }
        window.shouldAllowManualOrientationChange = function (widthToUse, heightToUse) {
            if (checkIfClientIsMobile()) return false;
            let minValueToAllow = 350;
            if (widthToUse == null || isNaN(widthToUse) || heightToUse == null || isNaN(heightToUse)) {
                if (useSplitPaneHeightAndWidth === true) {
                    let elem = $(".resizableChildren");
                    widthToUse = elem.width();
                    heightToUse = elem.height();
                }
                else {
                    minValueToAllow = 711;
                    widthToUse = window.innerWidth;
                    heightToUse = window.innerHeight;
                }
            }
            let allow = widthToUse >= minValueToAllow && heightToUse >= minValueToAllow;
            return allow;
        }
        window.shouldSplitHorizontal = function (widthToUse, heightToUse) {
            let winHeight = window.innerHeight;
            let winWidth = window.innerWidth;
            if (orientation !== autoBasedOnWindowSize && window.shouldAllowManualOrientationChange(widthToUse, heightToUse)) {
				return orientation;
            }
            widthToUse = parseFloat(widthToUse);
            heightToUse = parseFloat(heightToUse);
            if (!isNaN(widthToUse) && !isNaN(heightToUse)) {
                return autoResizeShouldSplitHorizontalFunc(widthToUse, heightToUse);
            }
            if (useSplitPaneHeightAndWidth === true) {
                let elem = $(".resizableChildren");
                let width = elem.width();
                let height = elem.height();
                return autoResizeShouldSplitHorizontalFunc(width, height);
            }
            return autoResizeShouldSplitHorizontalFunc(winWidth, winHeight);
        };
	});
</script>

<div id="splitPaneTopBar" style="width: 100%; margin: 0px 0px 2px 0px; position: relative; ">
    
    <button id="expandDiv" class="expand" style="display: none; margin-right: 10px; ">>></button>
        <span style="cursor: pointer" class="k-link iconButton hideOnOnly splitPaneLayoutHider"><input id="splitPaneLayout" style="display: none !important;" /><img style="font-size: 16px;width: 1em;" src="/Tools/Images/rotate.png" alt="Switch panel orientation"/></span>
    </div>
<div class="resizableChildren" style="display: inline-block; width: 100%; height: 100%; max-height: 100%">
    
    <div id="mapResults" class="hideMyChildren" data-pane-name="Map">


<div id="map" style="width:100%; height: 100%; min-height: inherit; padding: 5px; alignment: center"></div><div id='loading'><div id='loadingcont'><p id='loadingspinr'>
                                                                                                                 Refreshing Map...</p></div></div><style>
    #layerControl li {
        list-style-type: none;
        padding-left: 3px;
    }

    #layerControl ul {
        padding-left: 1.5rem;
    }

    #layerControl .layerParent .layerParent {
        margin-left: -1rem;
    }

    #layerControl label {
        font-weight: normal;
        padding: 0;
        margin: 0;
    }

    #layerControl .expanderLeft {
        width: 0.7rem;
        display: inline-block;
        text-align: center;
    }

    #layerControl {
        font-family: Roboto, Arial, sans-serif;
        background: #fff;
        padding: 10px;
        font-size: 15px;
        min-height: 40px;
        margin-top: 10px;
    }


    .leaflet-tooltip.hidden-background-tooltip {
        background-color: transparent;
        border: transparent;
        box-shadow: none;
        font-weight: bold;
    }

    .leaflet-tooltip.dist-tooltip {
        color: blue;
        font-size: 90%;
    }

    .leaflet-tooltip.div-tooltip {
        color: green;
    }

    .leaflet-tooltip.county-tooltip {
        color: #a3a300;
        /*color: #d7d700;
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000*/
    }


    @media (min-width: 710px) {
        .leaflet-popup-content table {
            min-width: 350px;
        }
    }

    @media (max-width: 709px) {
        .leaflet-popup {
            max-width: 75vw;
            overflow-x: scroll;
        }

        .leaflet-popup-content {
            max-width: 75vw;
            max-height: 50vh;
            overflow-x: scroll;
        }
    }

    .leaflet-popup-content select.form-control.search-height {
        display: inline-block;
    }


    .leaflet-layerstree-header label {
        font-weight: normal;
        margin-bottom: 3px;
    }

    input.leaflet-control-layers-selector {
        margin-right: 3px;
        margin-top: 1px;
    }

    .leaflet-control-layers-expanded .leaflet-control-layers-overlays {
        padding-top: 3px;
        padding-bottom: 3px;
    }

    .leaflet-top.leaflet-left {
        z-index: 1001;
    }

    .leaflet-tooltip.hidden-background-tooltip {
        background-color: transparent;
        border: transparent;
        box-shadow: none;
        font-weight: bold;
    }

        .leaflet-tooltip.hidden-background-tooltip.leaflet-tooltip-top {
            padding-bottom: 0;
        }

        .leaflet-tooltip.hidden-background-tooltip:before {
            border-color: transparent;
        }

    .leaflet-tooltip.hidden-background-tooltip {
        color: #000;
        text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
    }


    .whitelabel .leaflet-tooltip.hidden-background-tooltip {
        color: #fff;
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
    }

    .dropdown-menu {
        z-index: 1050;
    }

    .leaflet-control-layers-expanded.useManualExpanding:not(.manualExpanded) {
        padding: 0;
    }

        .leaflet-control-layers-expanded.useManualExpanding:not(.manualExpanded) .leaflet-control-layers-toggle {
            display: block;
        }

        .leaflet-control-layers-expanded.useManualExpanding:not(.manualExpanded) .leaflet-control-layers-list {
            display: none;
        }

    .leaflet-control-layers.useManualExpanding.manualExpanded .leaflet-control-layers-toggle {
        display: none;
    }

    .leaflet-control-layers.useManualExpanding.manualExpanded {
        padding: 6px 10px 6px 6px;
    }

        .leaflet-control-layers.useManualExpanding.manualExpanded .leaflet-control-layers-list {
            display: block;
        }

    .leaflet-control-layers-expanded.useManualExpanding.manualExpanded .leaflet-control-layers-overlays {
        padding-top: 0;
        padding-bottom: 0;
    }

    .leaflet-control-layers-separator + .leaflet-control-layers-separator {
        display: none;
    }

    .leaflet-control-layers-list {
        min-height: 40px;
    }
	
	#legend div {
		cursor: pointer;
	}
</style>

<link href='/Tools/Leaflet/leaflet.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/leaflet.fullscreen.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/L.Control.Layers.Tree.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/MarkerCluster.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/MarkerCluster.default.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/Control.Geocoder.css?v=06-25-2024_1425' rel='stylesheet'/>
<link href='/Tools/Leaflet/leaflet.zoomhome.css?v=06-25-2024_1425' rel='stylesheet'/>

<script src='/Tools/js/map-icons.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/leaflet.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/L.Label.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/L.LatLng.UTM.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/esri-leaflet.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/leaflet.fullscreen.min.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/L.Control.Layers.Tree.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/leaflet.markercluster.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/rbush.min.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/leaflet-markers-canvas.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/L.ZoomBasedLayerGroup.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/L.ToggleableClusterAndZoomBasedLayer.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/leaflet.zoomhome.min.js?v=06-25-2024_1425'></script>
<script src='/Tools/Leaflet/Control.Geocoder.js?v=06-25-2024_1425'></script>
<script src='/Tools/js/MapUtilsLeaflet.js?v=06-25-2024_1425'></script>

<div id="legend"><h5 style="margin-top: 0">Legend</h5></div>
<div id="legendCollapsed"><h5 style="margin:0"><a href="#" style="color: rgb(86, 86, 86); line-height: 1.5em;">Show Legend</a></h5></div>
<script>
    $(document).on("click", "#legendCollapsed a", function (e) {
        showLegend(true);
        e.preventDefault();
    });
    $(document).on("click", "#legend a", function (e) {
        showLegend(false);
        e.preventDefault();
    });
</script>

<script>
    window.getDivisionsUrl = function () { return "/Tools/Gis/GetDivisions" };
    window.getDistrictsUrl = function () { return "/Tools/Gis/GetDistricts" };
    window.getCountiesUrl = function () { return "/Tools/Gis/GetCounties" };
    window.runWithGisToken = (function () {
        let isRunning = false;
        let queue = [];
        return function (functionWithTokenArg) {
            if (isRunning == true) {
                queue.push(functionWithTokenArg);
                return;
            }
            // This is absolutely, ridiculously insecure, it hurt me to write it, and we need to find a better way, but this will at least get us through the demo
            var tokenToPass = Number(localStorage.tokenExp) >= new Date().getTime() ? localStorage.token : null;
            if (tokenToPass == null) {
                isRunning = true;
                $.ajax({
                    url: '/Tools/Gis/GetGisToken',
                    type: "GET",
                    success: function (result) {
                        try {
                            var json = typeof result === "string" ? JSON.parse(result) : result;
                            tokenToPass = json.token;
                            localStorage.token = tokenToPass;
                            localStorage.tokenExp = getDate(json.expires).getTime();

                            functionWithTokenArg(tokenToPass);

                            while (queue.length > 0) {
                                var func = queue.shift();
                                if (typeof func === "function") {
                                    func(tokenToPass);
                                }
                            }
                        }
                        catch (e) {

                        }
                        isRunning = false;
                    },
                    error: function (ex) {
                        isRunning = false;
                    }
                });
            }
            else {
                functionWithTokenArg(tokenToPass);
            }
        }
    }());
</script>


<script type="text/javascript"
        src="/Tools/Scripts/spin.min.js"></script>

<script type="text/javascript">
    var map = null;
    var initialLoad = true;
    var mapCenterLat = 0;
    var mapCenterLong = 0;
    var ifRadiusSelectedCenterLat = '';
    var ifRadiusSelectedCenterLong = '';
    var dataSetName = 'AdminCalls';
    var mapLegend = null;
    var clusterOptions = {
        zoomOnClick: true, maxZoom: 10, minZoom: 6, gridSize: 50, minimumClusterSize: 2, imagePath: 'https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m' }; // Define the marker clusterer options
    var clusterByDefault = true;
    var zoomToStateOnLoad = true;
    //Center on Denver if no criteria
    if (mapCenterLat == 0 && mapCenterLong == 0) {
        mapCenterLat = 39.7392;
        mapCenterLong = -104.9903;
    }

    function getMapData() {
        let data = {"Features":[],"BoundingBoxes":null,"CRS":{"Properties":{"name":"urn:ogc:def:crs:OGC::CRS84"},"Type":1},"Type":8};
        if (data.Features == null || data.Features.length < 1) {
            data = { Features: (typeof window.getGridData === "function" ? window.getGridData() : []) };
        }
        return data;
    }

    (function () {
        let count = 0;
        let init = false;
        $(document).on("mapWidgetFilterChanged", function () {
            count = -1;
        });
        window.initialize = function() {
            let data = getMapData();
            if (count != data.Features.length || !init) {
                count = data.Features.length;
                init = true;
                initMap(data, mapCenterLat, mapCenterLong, 'map', 7);
            }
        }
        window.reinitializeMap = function() {
            let data = getMapData();
            count = data.Features.length;
            init = true;
            initMap(data, mapCenterLat, mapCenterLong, 'map', 7);
        }
    }());
    function getMinUnclusteredMarkerZoom() {
        return 11;
    }
    function getMaxUnclusteredMarkerZoom() {
        return null;
    }
</script>

<script type="text/javascript" src="/Tools/js/map-icons.js"></script>
<style>
    #legend {
        font-family: Arial, sans-serif;
        background: #fff;
        padding: 10px;
        margin: 10px;
        border: 1px solid #000;
        display: none;
    }

    #legendCollapsed {
        display: none;
        font-family: Roboto, Arial, sans-serif;
        background: #fff;
        padding: 10px;
        font-size: 18px;
        margin-top: 10px;
    }

    .leaflet-left:first-of-type > * {
        display: inline-block;
        float: none;
    }

    @media only screen and (max-width: 321px) {
        .mobile-line-height {
            /*width: 235px;
            line-height: .6em;*/
        }
    }

    #mapOptions {
        font-family: Arial, sans-serif;
        background: #fff;
        padding: 10px;
        margin-left: 10px;
        border: 1px solid #000;
    }
</style>
    </div>
    
    <div id="dataGridResults" class="hideMyChildren" data-pane-name="Table">
<style>
    /*Darker font on record count at bottom of table*/
    .k-pager-info {
        color: black;
    }

    .k-grid-header .k-header {
        overflow: visible !important;
        white-space: normal !important;
        font-size: 10px;
        text-align: center;
    }
    .k-grid {
        font-size: 10px;
        width: 100%;
    }
    .k-grid td {
        white-space: nowrap;
    }
    .k-grid.k-grid-stretch-height-full {
        height: calc(100% - 90px) !important;
    }
    .k-grid.k-grid-stretch-height-full .k-grid-content {
        height: calc(100% - 103px) !important;
    }

    .k-grid.k-grid-stretch-height-nogroup {
        height: calc(100% - 90px) !important;
    }
    .k-grid.k-grid-stretch-height-nogroup .k-grid-content {
        height: calc(100% - 72px) !important;
    }
    .k-grid.k-grid-stretch-height-simple {
        height: calc(100% - 90px) !important;
    }
    .k-grid.k-grid-stretch-height-simple .k-grid-content {
        height: calc(100% - 37px) !important;
    }

    #AdministrativeCallsGrid .k-dropdown {
        width: 60px;
    }
</style>

<input data-val="true" data-val-number="The field ResultCount must be a number." data-val-required="The ResultCount field is required." id="ResultCount" name="ResultCount" type="hidden" value="116" />

<div class="k-widget k-grid" id="AdministrativeCallsGrid"><div class="k-grid-header"><div class="k-grid-header-wrap"><table><colgroup><col style="width:45px" /><col style="width:75px" /><col style="width:105px" /><col style="width:110px" /><col style="width:60px" /><col style="width:75px" /><col style="width:110px" /><col style="width:75px" /><col style="width:110px" /><col style="width:85px" /><col style="width:85px" /><col style="width:80px" /><col style="width:80px" /><col style="width:93px" /><col style="width:93px" /></colgroup><thead class="k-grid-header"><tr><th class="k-header" data-field="call_num" data-index="0" data-title=" " id="06f8e2d5-b6e2-440b-a6f3-024e83552400" scope="col"><span class="k-link"> </span></th><th class="k-header" data-field="call_type" data-index="1" data-title="&lt;span title=&#39;The type of administration being described: Call, Futile Call, Nonconsumptive Call, or Authorized Diversion&#39;>Admin Scenario&lt;/span>" id="792b45d3-7d6f-446c-8c5c-3a9a00d787a9" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=call_type-asc"><span title='The type of administration being described: Call, Futile Call, Nonconsumptive Call, or Authorized Diversion'>Admin Scenario</span></a></th><th class="k-header" data-field="date_time_set" data-index="2" data-title="&lt;span title=&#39;Date and time that Administrative Call was set&#39;>Date Time Set&lt;/span>" id="46ca0ee0-f6d8-4d59-8eb0-2ff091ecc5de" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=date_time_set-asc"><span title='Date and time that Administrative Call was set'>Date Time Set</span></a></th><th class="k-header" data-field="date_time_released" data-index="3" data-title="&lt;span title=&#39;Date and time that Administrative Call was released&#39;>Date Time Released&lt;/span>" id="92acd248-297a-4ca0-ad14-7d29387a30f4" scope="col" style="display:none"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=date_time_released-asc"><span title='Date and time that Administrative Call was released'>Date Time Released</span></a></th><th class="k-header" data-field="WaterSource_name" data-index="4" data-title="&lt;span title=&#39;Name of water source&#39;>Water Source&lt;/span>" id="a7006dad-f231-4acf-9be4-28a13f01c780" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=WaterSource_name-asc"><span title='Name of water source'>Water Source</span></a></th><th class="k-header" data-field="stream_mile" data-index="5" data-title="&lt;span title=&#39;Distance in miles to the confluence with the next downstream water source (or distance to state line)&#39;>Stream Mile&lt;/span>" id="f4565c37-fbd1-4de7-919e-e910e2da9c1b" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=stream_mile-asc"><span title='Distance in miles to the confluence with the next downstream water source (or distance to state line)'>Stream Mile</span></a></th><th class="k-header" data-field="calling_wdid" data-index="6" data-title="&lt;span title=&#39;The most downstream diversion structure that is controlling and diverting the entire available natural stream flow&#39;>Location WDID&lt;/span>" id="9f9d47b0-0853-4092-908e-d5206e3efa27" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=calling_wdid-asc"><span title='The most downstream diversion structure that is controlling and diverting the entire available natural stream flow'>Location WDID</span></a></th><th class="k-header" data-field="calling_structure" data-index="7" data-title="&lt;span title=&#39;Call location structure name&#39;>Location Structure Name&lt;/span>" id="0fdc9f2a-4aaf-4ac9-90fc-5ff172d6b88d" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=calling_structure-asc"><span title='Call location structure name'>Location Structure Name</span></a></th><th class="k-header" data-field="waterright_WDID" data-index="8" data-title="&lt;span title=&#39;The structure whose water right priority is the most junior diverter within the Call reach&#39;>Call Priority WDID&lt;/span>" id="6cc1d098-d3e9-48a6-836d-9a51819b2a44" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=waterright_WDID-asc"><span title='The structure whose water right priority is the most junior diverter within the Call reach'>Call Priority WDID</span></a></th><th class="k-header" data-field="waterright_structure" data-index="9" data-title="&lt;span title=&#39;Call priority structure name&#39;>Priority Structure Name&lt;/span>" id="b59a09ee-6ab3-4b9a-9d3b-be251a31c6b0" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=waterright_structure-asc"><span title='Call priority structure name'>Priority Structure Name</span></a></th><th class="k-header" data-field="admin_no" data-index="10" data-title="&lt;span title=&#39;A calculated number developed by DWR that ranks decrees in order of seniority. See Data Dictionary under Help Menu for more.&#39;>Priority Admin No&lt;/span>" id="db963f7e-15dc-40ff-9e7d-24858032ea75" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=admin_no-asc"><span title='A calculated number developed by DWR that ranks decrees in order of seniority. See Data Dictionary under Help Menu for more.'>Priority Admin No</span></a></th><th class="k-header" data-field="priority_date" data-index="11" data-title="&lt;span title=&#39;Either the appropriation date or the previous adjudication date, whichever is later.  The Priority Date is the left side of the Priority Admin No converted to a date.&#39;>Priority Date&lt;/span>" id="b6c57543-dcee-420a-89a3-97220bb5a736" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=priority_date-asc"><span title='Either the appropriation date or the previous adjudication date, whichever is later.  The Priority Date is the left side of the Priority Admin No converted to a date.'>Priority Date</span></a></th><th class="k-header" data-field="priority_no" data-index="12" data-title="&lt;span title=&#39;An early District Courtâ€™s method to indicate a water rightâ€™s seniority in a water drainage.  The Priority No is now largely meaningless.&#39;>Priority No&lt;/span>" id="aea330c4-3b1f-4922-b000-ad9c073e49ae" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=priority_no-asc"><span title='An early District Courtâ€™s method to indicate a water rightâ€™s seniority in a water drainage.  The Priority No is now largely meaningless.'>Priority No</span></a></th><th class="k-header" data-field="bounding_WDID" data-index="13" data-title="&lt;span title=&#39;WDID of upper terminus of Call; if blank, the call extends to the headwaters of the basin&#39;>Bounding WDID&lt;/span>" id="97cb41c5-dd3e-4095-978a-27ee1160f4bc" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=bounding_WDID-asc"><span title='WDID of upper terminus of Call; if blank, the call extends to the headwaters of the basin'>Bounding WDID</span></a></th><th class="k-header" data-field="bounding_structure_name" data-index="14" data-title="&lt;span title=&#39;Structure Name of upper terminus of Call; if blank, the call extends to the headwaters of the basin&#39;>Bounding Structure Name&lt;/span>" id="fb2dd094-c79f-47df-bcce-132924bc46f6" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=bounding_structure_name-asc"><span title='Structure Name of upper terminus of Call; if blank, the call extends to the headwaters of the basin'>Bounding Structure Name</span></a></th><th class="k-header" data-field="set_comments" data-index="15" data-title="&lt;span title=&#39;Comments related to setting the Administrative Call&#39;>Set Comments&lt;/span>" id="933e15f2-01fb-452a-8142-f0e965b6f895" scope="col"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=set_comments-asc"><span title='Comments related to setting the Administrative Call'>Set Comments</span></a></th><th class="k-header" data-field="release_comment" data-index="16" data-title="&lt;span title=&#39;Comments related to the release of the call&#39;>Release Comments&lt;/span>" id="e51cef01-af32-41aa-ae72-9046318c93f0" scope="col" style="display:none"><a class="k-link" href="/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read?AdministrativeCallsGrid-sort=release_comment-asc"><span title='Comments related to the release of the call'>Release Comments</span></a></th></tr></thead></table></div></div><div class="k-grid-content k-auto-scrollable" style="height:200px"><table><colgroup><col style="width:45px" /><col style="width:75px" /><col style="width:105px" /><col style="width:110px" /><col style="width:60px" /><col style="width:75px" /><col style="width:110px" /><col style="width:75px" /><col style="width:110px" /><col style="width:85px" /><col style="width:85px" /><col style="width:80px" /><col style="width:80px" /><col style="width:93px" /><col style="width:93px" /></colgroup><tbody><tr class="k-no-data"><td colspan="15"></td></tr></tbody></table></div><div class="k-pager-wrap k-grid-pager"><a aria-label="Go to the first page" class="k-link k-pager-nav k-state-disabled k-pager-first" data-page="1" href="#" title="Go to the first page"><span class="k-icon k-i-arrow-end-left"></span></a><a aria-label="Go to the previous page" class="k-link k-pager-nav k-state-disabled" data-page="0" href="#" title="Go to the previous page"><span class="k-icon k-i-arrow-60-left"></span></a><div class="k-pager-numbers-wrap k-floatwrap"><select class="k-dropdown"><option selected="selected">1</option></select><ul class="k-pager-numbers"><li><span class="k-link k-state-selected" data-page="1">1</span></li></ul></div><a aria-label="Go to the next page" class="k-link k-pager-nav k-state-disabled" data-page="2" href="#" title="Go to the next page"><span class="k-icon k-i-arrow-60-right"></span></a><a aria-label="Go to the last page" class="k-link k-pager-nav k-state-disabled k-pager-last" data-page="1" href="#" title="Go to the last page"><span class="k-icon k-i-arrow-end-right"></span></a><span class="k-pager-sizes k-label"><select><option value="10">10</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="1500">1500</option></select>items per page</span><span class="k-pager-info k-label">No items to display</span></div></div><script>
	kendo.syncReady(function(){jQuery("#AdministrativeCallsGrid").kendoGrid({"columns":[{"title":" ","headerAttributes":{"data-field":"call_num","data-title":" "},"menu":false,"width":"45px","template":"\u003ca href=\u0027/Tools/AdministrativeCalls/#= call_num #\u0027 target = \u0027_blank\u0027\u003e\u003cspan title=\u0027Hyperlink to detail page\u0027\u003eView\u003c/span\u003e\u003c/a\u003e","field":"call_num","sortable":false,"filterable":false,"encoded":true,"editor":"\u003cinput class=\"text-box single-line\" data-val=\"true\" data-val-number=\"The field Call Num must be a number.\" data-val-required=\"The Call Num field is required.\" id=\"call_num\" name=\"call_num\" type=\"number\" value=\"0\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"call_num\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027The type of administration being described: Call, Futile Call, Nonconsumptive Call, or Authorized Diversion\u0027\u003eAdmin Scenario\u003c/span\u003e","headerAttributes":{"data-field":"call_type","data-title":"\u0026lt;span title=\u0026#39;The type of administration being described: Call, Futile Call, Nonconsumptive Call, or Authorized Diversion\u0026#39;\u003eAdmin Scenario\u0026lt;/span\u003e"},"width":"75px","field":"call_type","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"call_type\" name=\"call_type\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"call_type\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Date and time that Administrative Call was set\u0027\u003eDate Time Set\u003c/span\u003e","attributes":{"style":"text-align: center;"},"headerAttributes":{"data-field":"date_time_set","data-title":"\u0026lt;span title=\u0026#39;Date and time that Administrative Call was set\u0026#39;\u003eDate Time Set\u0026lt;/span\u003e"},"width":"105px","field":"date_time_set","format":"{0:M/d/yyyy h:mm tt}","filterable":{"ui":datePicker},"encoded":true,"editor":"\u003cinput data-val=\"true\" data-val-date=\"The field date_time_set must be a date.\" id=\"date_time_set\" name=\"date_time_set\" type=\"text\" /\u003e\u003cscript\u003e\r\n\tkendo.syncReady(function(){jQuery(\"#date_time_set\").kendoDateTimePicker({\"format\":\"M/d/yyyy h:mm tt\",\"min\":new Date(1900,0,1,0,0,0,0),\"max\":new Date(2099,11,31,0,0,0,0),\"interval\":30});});\r\n\u003c/script\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"date_time_set\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Date and time that Administrative Call was released\u0027\u003eDate Time Released\u003c/span\u003e","attributes":{"style":"text-align: center;"},"headerAttributes":{"data-field":"date_time_released","data-title":"\u0026lt;span title=\u0026#39;Date and time that Administrative Call was released\u0026#39;\u003eDate Time Released\u0026lt;/span\u003e"},"hidden":true,"menu":false,"width":"105px","field":"date_time_released","format":"{0:M/d/yyyy h:mm tt}","filterable":{"ui":datePicker},"encoded":true,"editor":"\u003cinput data-val=\"true\" data-val-date=\"The field date_time_released must be a date.\" id=\"date_time_released\" name=\"date_time_released\" type=\"text\" /\u003e\u003cscript\u003e\r\n\tkendo.syncReady(function(){jQuery(\"#date_time_released\").kendoDateTimePicker({\"format\":\"M/d/yyyy h:mm tt\",\"min\":new Date(1900,0,1,0,0,0,0),\"max\":new Date(2099,11,31,0,0,0,0),\"interval\":30});});\r\n\u003c/script\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"date_time_released\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Name of water source\u0027\u003eWater Source\u003c/span\u003e","headerAttributes":{"data-field":"WaterSource_name","data-title":"\u0026lt;span title=\u0026#39;Name of water source\u0026#39;\u003eWater Source\u0026lt;/span\u003e"},"width":"110px","field":"WaterSource_name","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"WaterSource_name\" name=\"WaterSource_name\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"WaterSource_name\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Distance in miles to the confluence with the next downstream water source (or distance to state line)\u0027\u003eStream Mile\u003c/span\u003e","attributes":{"style":"text-align: right;"},"headerAttributes":{"data-field":"stream_mile","data-title":"\u0026lt;span title=\u0026#39;Distance in miles to the confluence with the next downstream water source (or distance to state line)\u0026#39;\u003eStream Mile\u0026lt;/span\u003e"},"width":"60px","field":"stream_mile","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" data-val=\"true\" data-val-number=\"The field Stream Mile must be a number.\" id=\"stream_mile\" name=\"stream_mile\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"stream_mile\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027The most downstream diversion structure that is controlling and diverting the entire available natural stream flow\u0027\u003eLocation WDID\u003c/span\u003e","headerAttributes":{"data-field":"calling_wdid","data-title":"\u0026lt;span title=\u0026#39;The most downstream diversion structure that is controlling and diverting the entire available natural stream flow\u0026#39;\u003eLocation WDID\u0026lt;/span\u003e"},"width":"75px","field":"calling_wdid","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"calling_wdid\" name=\"calling_wdid\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"calling_wdid\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Call location structure name\u0027\u003eLocation Structure Name\u003c/span\u003e","headerAttributes":{"data-field":"calling_structure","data-title":"\u0026lt;span title=\u0026#39;Call location structure name\u0026#39;\u003eLocation Structure Name\u0026lt;/span\u003e"},"width":"110px","field":"calling_structure","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"calling_structure\" name=\"calling_structure\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"calling_structure\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027The structure whose water right priority is the most junior diverter within the Call reach\u0027\u003eCall Priority WDID\u003c/span\u003e","headerAttributes":{"data-field":"waterright_WDID","data-title":"\u0026lt;span title=\u0026#39;The structure whose water right priority is the most junior diverter within the Call reach\u0026#39;\u003eCall Priority WDID\u0026lt;/span\u003e"},"width":"75px","field":"waterright_WDID","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"waterright_WDID\" name=\"waterright_WDID\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"waterright_WDID\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Call priority structure name\u0027\u003ePriority Structure Name\u003c/span\u003e","headerAttributes":{"data-field":"waterright_structure","data-title":"\u0026lt;span title=\u0026#39;Call priority structure name\u0026#39;\u003ePriority Structure Name\u0026lt;/span\u003e"},"width":"110px","field":"waterright_structure","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"waterright_structure\" name=\"waterright_structure\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"waterright_structure\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027A calculated number developed by DWR that ranks decrees in order of seniority. See Data Dictionary under Help Menu for more.\u0027\u003ePriority Admin No\u003c/span\u003e","attributes":{"style":"text-align: right;"},"headerAttributes":{"data-field":"admin_no","data-title":"\u0026lt;span title=\u0026#39;A calculated number developed by DWR that ranks decrees in order of seniority. See Data Dictionary under Help Menu for more.\u0026#39;\u003ePriority Admin No\u0026lt;/span\u003e"},"width":"85px","field":"admin_no","format":"{0:0.00000}","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" data-val=\"true\" data-val-number=\"The field Priority Admin No: must be a number.\" data-val-required=\"The Priority Admin No: field is required.\" id=\"admin_no\" name=\"admin_no\" type=\"text\" value=\"0.00\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"admin_no\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Either the appropriation date or the previous adjudication date, whichever is later.  The Priority Date is the left side of the Priority Admin No converted to a date.\u0027\u003ePriority Date\u003c/span\u003e","attributes":{"style":"text-align: center;"},"headerAttributes":{"data-field":"priority_date","data-title":"\u0026lt;span title=\u0026#39;Either the appropriation date or the previous adjudication date, whichever is later.  The Priority Date is the left side of the Priority Admin No converted to a date.\u0026#39;\u003ePriority Date\u0026lt;/span\u003e"},"width":"85px","field":"priority_date","format":"{0:M/d/yyyy}","encoded":true,"editor":"\u003cinput data-val=\"true\" data-val-date=\"The field Priority Date: must be a date.\" id=\"priority_date\" name=\"priority_date\" type=\"text\" /\u003e\u003cscript\u003e\r\n\tkendo.syncReady(function(){jQuery(\"#priority_date\").kendoDateTimePicker({\"format\":\"M/d/yyyy h:mm tt\",\"min\":new Date(1900,0,1,0,0,0,0),\"max\":new Date(2099,11,31,0,0,0,0),\"interval\":30});});\r\n\u003c/script\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"priority_date\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027An early District Courtâ€™s method to indicate a water rightâ€™s seniority in a water drainage.  The Priority No is now largely meaningless.\u0027\u003ePriority No\u003c/span\u003e","headerAttributes":{"data-field":"priority_no","data-title":"\u0026lt;span title=\u0026#39;An early District Courtâ€™s method to indicate a water rightâ€™s seniority in a water drainage.  The Priority No is now largely meaningless.\u0026#39;\u003ePriority No\u0026lt;/span\u003e"},"width":"80px","field":"priority_no","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"priority_no\" name=\"priority_no\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"priority_no\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027WDID of upper terminus of Call; if blank, the call extends to the headwaters of the basin\u0027\u003eBounding WDID\u003c/span\u003e","headerAttributes":{"data-field":"bounding_WDID","data-title":"\u0026lt;span title=\u0026#39;WDID of upper terminus of Call; if blank, the call extends to the headwaters of the basin\u0026#39;\u003eBounding WDID\u0026lt;/span\u003e"},"width":"80px","field":"bounding_WDID","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"bounding_WDID\" name=\"bounding_WDID\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"bounding_WDID\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Structure Name of upper terminus of Call; if blank, the call extends to the headwaters of the basin\u0027\u003eBounding Structure Name\u003c/span\u003e","headerAttributes":{"data-field":"bounding_structure_name","data-title":"\u0026lt;span title=\u0026#39;Structure Name of upper terminus of Call; if blank, the call extends to the headwaters of the basin\u0026#39;\u003eBounding Structure Name\u0026lt;/span\u003e"},"width":"93px","field":"bounding_structure_name","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"bounding_structure_name\" name=\"bounding_structure_name\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"bounding_structure_name\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Comments related to setting the Administrative Call\u0027\u003eSet Comments\u003c/span\u003e","headerAttributes":{"data-field":"set_comments","data-title":"\u0026lt;span title=\u0026#39;Comments related to setting the Administrative Call\u0026#39;\u003eSet Comments\u0026lt;/span\u003e"},"width":"93px","field":"set_comments","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"set_comments\" name=\"set_comments\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"set_comments\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"},{"title":"\u003cspan title=\u0027Comments related to the release of the call\u0027\u003eRelease Comments\u003c/span\u003e","headerAttributes":{"data-field":"release_comment","data-title":"\u0026lt;span title=\u0026#39;Comments related to the release of the call\u0026#39;\u003eRelease Comments\u0026lt;/span\u003e"},"hidden":true,"menu":false,"width":"93px","field":"release_comment","encoded":true,"editor":"\u003cinput class=\"text-box single-line\" id=\"release_comment\" name=\"release_comment\" type=\"text\" value=\"\" /\u003e\u003cspan class=\"field-validation-valid\" data-valmsg-for=\"release_comment\" data-valmsg-replace=\"true\"\u003e\u003c/span\u003e"}],"pageable":{"autoBind":false,"pageSizes":["10","100","500","1000","1500"],"buttonCount":10},"sortable":{"mode":"multiple","showIndexes":true},"selectable":"Single, Row","filterable":true,"columnMenu":true,"resizable":true,"reorderable":true,"scrollable":{"height":"200px"},"editable":{"confirmation":"Are you sure you want to delete this record?","confirmDelete":"Delete","cancelDelete":"Cancel","mode":"inline","create":true,"update":true,"destroy":true},"autoBind":false,"dataSource":{"type":(function(){if(kendo.data.transports['aspnetmvc-ajax']){return 'aspnetmvc-ajax';} else{throw new Error('The kendo.aspnetmvc.min.js script is not included.');}})(),"transport":{"read":{"url":"/Tools/AdministrativeCalls/CallSearch/Calls_Grid_Read"},"prefix":""},"pageSize":100,"page":1,"groupPaging":false,"total":0,"requestEnd":onRequestEnd,"schema":{"data":"Data","total":"Total","errors":"Errors","model":{"id":"waterright_WDID","fields":{"Calling_WDID_latdecdeg":{"type":"number","defaultValue":null},"Calling_WDID_longdecdeg":{"type":"number","defaultValue":null},"Bounding_WDID_latdecdeg":{"type":"number","defaultValue":null},"Bounding_WDID_longdecdeg":{"type":"number","defaultValue":null},"DIV":{"type":"number","defaultValue":null},"WaterDivisionName":{"type":"string"},"Priority_Units":{"type":"string"},"WD":{"type":"number","defaultValue":null},"WaterSourceNameAndMile":{"type":"string"},"WaterSource_name":{"type":"string"},"stream_mile":{"type":"number","defaultValue":null},"admin_no":{"type":"number"},"bounding_WDID":{"type":"string"},"bounding_structure_name":{"type":"string"},"call_num":{"type":"number"},"call_type":{"type":"string"},"calling_structure":{"type":"string"},"calling_wdid":{"type":"string"},"date_time_released":{"type":"date","defaultValue":null},"DateTimeReleasedDisplay":{"editable":false,"type":"string"},"date_time_set":{"type":"date","defaultValue":null},"DateTimeSetDisplay":{"editable":false,"type":"string"},"is_bounded":{"type":"boolean"},"UpstreamExtentDisplayValue":{"editable":false,"type":"string"},"CallingWdidValue":{"editable":false,"type":"string"},"CallingPriority":{"editable":false,"type":"string"},"BoundingLocation":{"editable":false,"type":"string"},"order_no":{"type":"number"},"priority_amount":{"type":"number","defaultValue":null},"priority_amount_display":{"type":"string"},"priority_date":{"type":"date","defaultValue":null},"priority_date_display":{"type":"string"},"priority_no":{"type":"string"},"release_comment":{"type":"string"},"set_comments":{"type":"string"},"total_inpriority":{"type":"number","defaultValue":null},"total_inpriority_display":{"type":"string"},"waterright_WDID":{"type":"string"},"waterright_structure":{"type":"string"},"AssociatedCalls":{"type":"object"},"MapInfo":{"type":"object"},"AskDwrLinkParams":{"type":"object"},"InterpolatedAskDwrUrl":{"type":"string"},"admin_flag":{"type":"number","defaultValue":null},"admin_message":{"type":"string"},"allToolTips":{"type":"object"},"HelpDescription":{"type":"string"}}}}}});});
</script>

<script>

    //Removes column settings from view column
    $(function() {
        $('#AdministrativeCallsGrid .k-header-column-menu').eq(0).hide();
        if ('Model.Action' == "Active") {

            $('#AdministrativeCallsGrid .k-header-column-menu').eq(0).hide();
        }
        else {
            $('#AdministrativeCallsGrid .k-header-column-menu').eq(0).hide();
        }
    });

</script>


<script>
    $(document).ready(function () {
        bindGridForRefresh("AdministrativeCallsGrid");
    });
</script>









    </div>
</div>
<script>

    window.onlyShowFilteredGridDataInMap = window.onlyShowFilteredGridDataInMap || function () { return true; };
    function getOnlyShowFilteredGridDataInMapVal() {
        return typeof onlyShowFilteredGridDataInMap === "function" && onlyShowFilteredGridDataInMap() == true;
    }

    $(document).ready(function () {
        // Give the grid a chance to be initialized before we try to bind events
        setTimeout(function () {
            var grid = $("#dataGridResults .k-grid").data("kendoGrid");
            if (grid != null) {
                let prevFilter = grid.dataSource.filter();
                grid.bind("filter", function (newFilter) {
                    if (!deepEqual(prevFilter, newFilter) && getOnlyShowFilteredGridDataInMapVal()) {
                        $(document).trigger("mapWidgetFilterChanged");
                    }
                    prevFilter = newFilter;
                });
            }
        }, 50);
    });

    function getGridData() {
        let widgetElem = $(getKendoWidgetForMapJQuerySelector());
        let widget = widgetElem.data("kendoGrid");
        let allData = widget.dataSource.data();
        let baseDataToUse = allData;
        if (getOnlyShowFilteredGridDataInMapVal()) {
            try {
                let filterDs = new kendo.data.DataSource({ data: baseDataToUse });
                filterDs.filter(widget.dataSource.filter() || []);
                let filteredData = filterDs.view();
                baseDataToUse = filteredData;
                filteredData = null;
            } catch { }
        }
        let latitudeField = "latdecdeg";
        let longitudeField = "longdecdeg";
        if (typeof window.getLatitudeFieldName === "function") {
            latitudeField = window.getLatitudeFieldName() || latitudeField;
        }
        if (typeof window.getLongitudeFieldName === "function") {
            longitudeField = window.getLongitudeFieldName() || longitudeField;
        }
        let data = [];
        for (var i = 0; i < baseDataToUse.length; i++) {
            let cur = baseDataToUse[i];
            let lat = cur[latitudeField];
            let lng = cur[longitudeField];
            if (lat == null || lng == null) continue;//Eliminate null lats/longs
            if (cur.Geometry == null) {
                cur.Geometry = { Coordinates: { Latitude: lat, Longitude: lng } };
            }
            data.push(cur);
        }
        data.sort(getSorter("Geometry.Coordinates.Latitude", "Geometry.Coordinates.Longitude"));
        baseDataToUse = null;
        allData = null;
        return data;
    }
	function uuidv4() {
	  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
		var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
		return v.toString(16);
	  });
	}

    function getMapWidget() {
        return $(getKendoWidgetForMapJQuerySelector()).data("kendoGrid");
    }
    function setUpDivsDistsAndCountiesOnMapInit() {
        return false;
    }
    $(document).ready(function () {
        $(getKendoWidgetForMapJQuerySelector()).height("100%")//.parent().css("min-height", "168px");
        //$("#map").parent().css("min-height", "100px");
        let widget = getMapWidget();
        let hasSetUpDivsAndDists = false;
        widget.element.addClass("hideLoadingBarForNow");
        widget.dataSource.bind("change", function (e) {
            widget.one("dataBound", function () {
                initialize();
				setTimeout(function(e) {
                    widget.element.removeClass("hideLoadingBarForNow");
					//$(".k-loading-image").hide();
					kendo.ui.progress($(".resizableChildren").parent(), false);
				});
                /*if (!hasSetUpDivsAndDists && !setUpDivsDistsAndCountiesOnMapInit() && !checkIfClientIsMobile()) {
                    hasSetUpDivsAndDists = true;
                    setTimeout(function () {
                        setUpDivsAndDists();
                        setUpCounties();
                    }, 1500);
                }*/
            });
        });
        widget.dataSource.one("requestStart", function(e) {
			kendo.ui.progress($(".resizableChildren").parent().css("position", "relative"), true);
			setTimeout(function(e) {
				//$(".k-loading-image").appendTo($(".resizableChildren").parent().css("position", "relative"));
			});

        })
        let grid;
 
        grid = widget;
        // This is triggered when a row is selected
        grid.bind("change", function (e) {
            let mapContainer = $(map.getContainer());
            if (mapContainer.height() === 0 || mapContainer.width() === 0 || !mapContainer.is(":visible")) {
                return;//Don't waste resources if the map is collapsed
            }
            let selectedTr = this.select();
            let modelId;
            if (grid.dataItem(grid.select()) != null) {
                modelId = grid.dataItem(grid.select()).id
            }
            let selectedUid = selectedTr.attr("data-uid");
            if (selectedUid == null) return;

            let markerToOpenPopupFor = null;
            let layers = markerManager.getLayers();
            for (let i = 0; i < layers.length; i++) {
                let marker = layers[i];
                if (marker != null && marker.options != null && marker.options.gridUid == selectedUid) {
                    markerToOpenPopupFor = marker;
                    markerToOpenPopupFor.once("popupclose", function () {
                        if (grid.select().attr("data-uid") == selectedUid)
                            grid.clearSelection();
                    });
                    break;
                }
            }
            let PolylineToOpenPopupFor = null;
            if (window.polylineManager != null) {
                layers = polylineManager.getLayers();
                if (modelId != null) {
                    for (let i = 0; i < layers.length; i++) {
                        let polyine = layers[i];
                        if (polyine != null && polyine.feature.properties != null && polyine.feature.properties.ID == modelId) {
                            PolylineToOpenPopupFor = polyine;
                            PolylineToOpenPopupFor.once("popupclose", function () {
                                if (grid.select().attr("data-uid") == selectedUid)
                                    grid.clearSelection();
                            });
                            break;
                        }
                    }
                }
            }
           
            if (getInsideGridMapInteraction() === false) {
                setInsideGridMapInteraction(true);
                if (markerToOpenPopupFor != null) {
                    let animationDurationInSeconds = 0;

                    setTimeout(function () {
                        markerManager.zoomToShowLayer(markerToOpenPopupFor, function () {
                            markerToOpenPopupFor.openPopup();
                        });
                    }, animationDurationInSeconds * 1000 + 75);
                } else if (PolylineToOpenPopupFor != null) {
                    if (window.polylineManager != null)
                        polylineManager.closePopup();
                    map.fitBounds(PolylineToOpenPopupFor.getBounds(), { padding: [100, 100] });
                    if (window.polylineManager != null)
                        polylineManager.openPopup(PolylineToOpenPopupFor);
                }
                else {
                    selectedTr.removeClass("k-state-selected");
                }
                setInsideGridMapInteraction(false);
            }
        });
        let afterMapResize = function (centerLatLng) {
            if (map != null) {
                let mapPane = $(map.getContainer()).closest(".k-pane");
                if (mapPane.length != 0 && (mapPane.height() === 0 || mapPane.width() === 0)) return;
                if (centerLatLng == null) centerLatLng = map.getCenter();
                map.invalidateSize();
                if (centerLatLng != null) {

                    map.panTo(centerLatLng);
                }
				if (markerManager != null) {
					markerManager.getLayers().forEach(function(marker) {
                        setTimeout(function () {
                            marker.fire("mapsizechanged");
                        }, 100);
					});
				}
            }
        };
		let afterGridResizeTimeoutId = null;
        let afterGridResize = function (gridScrollTop) {
            let widgetElem = $(getKendoWidgetForMapJQuerySelector());
            let gridPane = widgetElem.closest(".k-pane");
            if (gridPane.length != 0 && (gridPane.height() === 0 || gridPane.width() === 0)) return;
            let grid = widgetElem.data("kendoGrid");
            if (grid != null && afterGridResizeTimeoutId == null) {
				afterGridResizeTimeoutId = setTimeout(function() {
					afterGridResizeTimeoutId = null;
					grid.resize(true);
					if (gridScrollTop != null) {
						grid.content.scrollTop(gridScrollTop);
					}
				}, 25);
            }
        };
        let inPageResize = false;
        let currentSplitterWidth = $(".resizableChildren").width();
        let currentSplitterHeight = $(".resizableChildren").height();
        let splitterPreventDefaultOnWidthResizeFunc = function (e) {
            if (inPageResize === true && e.width != currentSplitterWidth && e.height == currentSplitterHeight) {
                e.preventDefault();
            }
            currentSplitterWidth = e.width;
            currentSplitterHeight = e.height;
        }
		window.collapseExpandFunc = function () {
            let topBar = $("#splitPaneTopBar");
			setTimeout(function() {
                let countOn = 0;
                let splitter = $(".resizableChildren").getKendoSplitter();
                if (splitter == null) return;
                let paneElems = splitter.element.find(".k-pane");
				for (let i = 0; i < splitter.options.panes.length; i++) {
					let pane = splitter.options.panes[i];
                    let curOffNow = pane.collapsed === true;
                    topBar.find('button.splitterPaneToggler[data-pane-index="' + i + '"]').toggleClass("off", curOffNow);
                    let paneElem = $(paneElems[i]);
                    paneElem.toggleClass("hideMyChildren", curOffNow);
                    let dataPaneName = paneElem.attr("data-pane-name");
                    if (dataPaneName != null) {
                        $("#onOffSwitch" + dataPaneName).prop("checked", !curOffNow);
                    }
					if (!curOffNow) {
						countOn++;
					}
                }
                afterMapResize();
                afterGridResize();
                let widgetElem = $(getKendoWidgetForMapJQuerySelector());
                if (widgetElem.length > 0) {
                    let closestPane = widgetElem.closest(".k-pane");
                    if (closestPane.length > 0 && (closestPane.height() === 0 || closestPane.width() === 0)) {
                        widgetElem.find("tr.k-state-selected").removeClass("k-state-selected");
                    }
                }
				$(".hideOnOnly").toggleClass("onlyOneSelectedIsTrue", countOn == 1);
                savePanesInfo();
			}, 50);
        };
        window.pageResize = function (ev) {
            inPageResize = true;
            let resizableParent = $(".resizableChildren");
            //let prevResizableParentHeight = resizableParent.height();
            let lsc = $("#leftSectionContent:visible");
            let lscBot = (lsc.offset() || { top: -9999 }).top + (lsc.outerHeight() || -9999);
            let elemTop = resizableParent.offset().top;
            let lscAboveElem = lscBot >= 0 && lscBot <= elemTop;
            let windowHeight = $(window).height();
            let availablePageHeight = windowHeight - ($("#footer").height() || $("#detailsFooter").height() || 0) - 15 - (lscAboveElem ? 0 : $("#header").height() || $("#detailsHeader").height() || 0) - ($("#messageBox:visible").height() || 0);
            availablePageHeight -= Math.max(0, elemTop - resizableParent.parent().offset().top);
            if (availablePageHeight < 100 || availablePageHeight > windowHeight) {
                setTimeout(function () {
                    pageResize(ev);
                }, 100);
                return;
            }
            let resizableParentWidth = resizableParent.width();

            let oldSplitter = $(".resizableChildren").data("kendoSplitter");
            if (oldSplitter != null) {
                let panes = oldSplitter.options.panes;
                let paneSizes = [];
                let overallSize = 0;
                let success = true;
                for (let i = 0; i < panes.length; i++) {
                    let size = panes[i].size;
                    let success = false;
                    if (size != null) {
                        let parsed = parseFloat(size);
                        if (!isNaN(parsed)) {
                            paneSizes.push(parsed);
                            overallSize += parsed;
                            continue;
                        }
                    }
                    success = false;
                    break;
                }
                if (success && overallSize > 0) {
                    for (let i = 0; i < panes.length; i++) {
                        panes[i].size = ((paneSizes[i] / overallSize) * 100).toFixed(3) + "%" ;
                    }
                }
            }

            let createdNewSplitter = false;
            if (ev == null || ev.resetSplitter !== false) {
                createdNewSplitter = window.setUpSplitter(shouldSplitHorizontal(resizableParentWidth, availablePageHeight));
            }
            resizableParent.height(availablePageHeight);
            if (!createdNewSplitter) {
                let splitter = $(".resizableChildren").data("kendoSplitter");
                if (splitter != null)
                    splitter.size(".k-pane:last", splitter.size(".k-pane:last"));
                afterMapResize(ev != null ? ev.mapCenter : null);
                afterGridResize(ev != null ? ev.gridScrollTop : null);
            }
            let allowManualOrientationChange = window.shouldAllowManualOrientationChange(resizableParentWidth, availablePageHeight);
            $("#splitPaneLayout").closest(".splitPaneLayoutHider").css({
                "cursor": (allowManualOrientationChange ? "" : "not-allowed"),
                "background": (allowManualOrientationChange ? "" : "#00000069"),
                //"pointer-events": (allowManualOrientationChange ? "" : "none"),
            }).attr("title", allowManualOrientationChange ? "Switch layout orientation" : "Table/Map space too small to switch layout orientation");
            inPageResize = false;
        };
        let shouldReverse = false;
        window.reverseSplitterItems = function() {
            shouldReverse = true;
            pageResize();
        }
        let savedPanesInfo = getSavedPanesInfo();
        window.setUpSplitter = function (horizontal) {
            if (horizontal === (function (und) { return und; }())) {// Just to make sure the "undefined" keyword wasn't defined like it could be in older browsers
                horizontal = shouldSplitHorizontal();
            }
            horizontal = horizontal === true;
            let orientation = horizontal ? "horizontal" : "vertical";
            let jElem = $(".resizableChildren");
            let existingSplitter = jElem.getKendoSplitter();
            let orientationHasChanged = existingSplitter == null || existingSplitter.orientation != orientation;
            if (orientationHasChanged === false && shouldReverse === false) {
                return false;
            }

            let docScrollTop = $(document).scrollTop();

            let deleteExisting = false;
            let mapCenter = map != null ? map.getCenter() : null;
            let gridScrollTop;
            let setGridScrollTop = function () { gridScrollTop = grid != null ? grid.content.scrollTop() : null; };
			let originalPaneSizes = ["45%", "55%"];
            let panes = [{ collapsible: true, size: originalPaneSizes[0], scrollable: false }, { collapsible: true, size: originalPaneSizes[1], scrollable: false }];

            let jPanes = jElem.find('[data-pane-name]');

            let newPaneElems = [];
            const panelAttributesToKeep = ["id", "data-pane-name"];
            jPanes.each(function () {
                let curPane = this;
                let curPaneClone = curPane.cloneNode();
                $.each(curPaneClone.attributes, function () {
                    if (this.specified && panelAttributesToKeep.indexOf(this.name) < 0) {
                        curPaneClone.removeAttribute(this.name);
                    }
                });
                newPaneElems.push(curPaneClone);
                let jCurPaneClone = $(curPaneClone);
                let jCurPane = $(curPane);
                jCurPane.children().appendTo(jCurPaneClone);
            });

            if (existingSplitter != null) {
                setGridScrollTop();

                panes = existingSplitter.options.panes || panes;
                let paneSizes = [];
                let overallSize = 0;
                let success = true;
                for (let i = 0; i < panes.length; i++) {
                    let size = panes[i].size;
                    let success = false;
                    if (size != null) {
                        let parsed = parseFloat(size);
                        if (!isNaN(parsed)) {
                            paneSizes.push(parsed);
                            overallSize += parsed;
                            continue;
                        }
                    }
                    success = false;
                    break;
                }
                for (let i = 0; i < panes.length; i++) {
                    panes[i].size = success && overallSize > 0 ? ((paneSizes[i] / overallSize) * 100).toFixed(3) + "%" : originalPaneSizes[i];
                }

                deleteExisting = true;
                //destroy the splitter link to the DOM
                //existingSplitter.destroyNonRecursive();
                existingSplitter.destroy();
            }
            else {
                setGridScrollTop();
            }
            if (shouldReverse !== false) {
                newPaneElems.reverse();
                panes.reverse();
            }
            if (savedPanesInfo != null) {
                let sortablePaneDataItems = [];
                for (let i = 0; i < newPaneElems.length; i++) {
                    let paneElem = newPaneElems[i];
                    let paneName = $(paneElem).attr("data-pane-name");
                    let savedPaneInfo = savedPanesInfo[paneName];
                    let order = 999 + i;
                    let collapsed = false;
                    let paneOption = panes[i];
                    if (savedPaneInfo != null) {
                        if (savedPaneInfo.ord != null) {
                            order = savedPaneInfo.ord;
                        }
                        if (savedPaneInfo.clpsd != null) {
                            collapsed = savedPaneInfo.clpsd;
                        }
                        if (savedPaneInfo.size != null) {
                            paneOption.size = savedPaneInfo.size;
                        }
                    }
                    paneOption.collapsed = collapsed;
                    sortablePaneDataItems.push({ paneElem: paneElem, pane: panes[i], order: order });
                }
                sortablePaneDataItems.sort(getSorter("order"));
                newPaneElems = [];
                panes = [];
                for (let i = 0; i < sortablePaneDataItems.length; i++) {
                    let sortablePaneDataItem = sortablePaneDataItems[i];
                    newPaneElems.push(sortablePaneDataItem.paneElem);
                    panes.push(sortablePaneDataItem.pane);
                }
                savedPanesInfo = null;// only want to run this code the first time on page load
            }
            let newJElem = $('<div class="resizableChildren" style="display: inline-block; width: 100%; height: 100%; max-height: 100%"></div>');
            let layoutBase = $("#splitPaneLayout").closest(".splitPaneLayoutHider");
            layoutBase.parent().find(">button.splitterPaneToggler").remove();
			let row = layoutBase.prev("#showHideDisplayOptions").find("tr");
			if (row.length === 0) {
			    let table = $('<table id="showHideDisplayOptions" style="position: relative;height: calc((1.14285714286 * 1em) + 6px + (1em/14));"><tbody><tr id="showHideTable"></tr></tbody></table>');
				table.insertBefore(layoutBase);
				row = table.find("tr");
			}
            row.empty();
            let minPaneSizes = { "Map": horizontal ? "10%" : "10%", "Table": horizontal ? "10%" : "146px" };
			let paneOrder = [];
            for (let i = 0; i < newPaneElems.length; i++) {
                let newPaneElem = newPaneElems[i];
                newJElem.append(newPaneElem);
                let paneName = newPaneElem.getAttribute("data-pane-name");
                if (paneName != null) {
					paneOrder.push(paneName);
                    //$('<button data-pane-index="' + i + '" class="splitterPaneToggler ' + (panes[i].collapsed === true ? 'off' : '') + '">' + paneName + '</button>')
					row.append($('<td style="padding-right: 3px;"><label style="font-weight: normal;margin:0;" for="onOffSwitch' + paneName + '">' + paneName + '</label></td>' +
								'<td style="padding-right: 7px;"><div title="Click to toggle visibility of the ' + paneName + ' pane" class="onoffswitch">' +
								'<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" checked="" data-on="Show" data-off="Hide" id="onOffSwitch' + paneName +
								'" data-pane-name="' + paneName + '"><label style="margin:0;" class="onoffswitch-label" for="onOffSwitch' + paneName + '">' +
                                '<span class="onoffswitch-inner"></span><span class="onoffswitch-switch"></span>' +
                                '</label></div></td>'));
                    if (i < panes.length) {
                        if (minPaneSizes.hasOwnProperty(paneName)) {
                            panes[i].min = minPaneSizes[paneName];
                        }
                    }
                }
            }
            newJElem.insertBefore(jElem);
            jElem.remove();
            jElem = newJElem

            let curIcon = layoutBase.next(".iconButton").find("span.k-icon,img");
            if (curIcon.length === 0) {
                curIcon = $('<img style="font-size: 16px;width: 1em;" src="/Tools/Images/flip.png" alt="Flip panels icon"></img>');//$('<span class="k-icon"></span>');
                let iconButton = $('<a title="Flip map and table panels" href="#" class="k-link iconButton hideOnOnly"></a>');
                iconButton.append(curIcon);
                iconButton.insertAfter(layoutBase);
                iconButton.on("click", function () {
                    reverseSplitterItems();
                });
            }
			let curIconIsImg = curIcon.is("img");
            if (shouldReverse || deleteExisting) {
                let isFlipped = curIcon.hasClass("k-flip-h") || curIcon.hasClass("k-flip-v");
				let toFlip = curIcon;//(curIcon.is("img") ? curIcon.parent() : curIcon);
                if (isFlipped) {
                    toFlip.removeClass("k-flip-h");
                    toFlip.removeClass("k-flip-v");
                }
                if ((!isFlipped && shouldReverse) || (isFlipped && orientationHasChanged)) {
                    toFlip.addClass("k-flip-" + (horizontal ? "h" : "v"));
                }
            }
            if (existingSplitter == null && $(newPaneElems[0]).attr("data-pane-name") === "Map") {
                curIcon.addClass("k-flip-" + (horizontal ? "h" : "v"));
            }
            layoutBase.find(".k-icon").toggleClass("k-flip-h-and-rotate-ninety", !horizontal);
            layoutBase.find("img").toggleClass("k-flip-h-and-rotate-ninety", horizontal);
			if (curIconIsImg) {
				curIcon.removeClass("rotate-neg-ninety");
				curIcon.removeClass("k-flip-h-and-rotate-neg-ninety");
				curIcon.toggleClass((curIcon.is(".k-flip-h") ? "k-flip-h-and-" : "") + "rotate-neg-ninety", horizontal);
				//curIcon.parent().toggleClass("k-flip-h", !horizontal && paneOrder.length > 0 && paneOrder[0] == "Map");
			}
			else {
				curIcon.removeClass("k-i-flip-horizontal k-i-flip-vertical");
				curIcon.addClass("k-i-flip-" + (horizontal ? "horizontal" : "vertical"));
			}

            jElem.find(">*").css({ width: "", height: "", top: "", left: "" }).css(horizontal ? { height: "100%" } : { width: "100%" });
            var splitter = jElem.kendoSplitter({
                orientation: orientation,
                panes: panes
            }).getKendoSplitter();
            jElem.find('.k-splitbar[aria-expanded]').removeAttr("aria-expanded");
            jElem.find(">*").css(horizontal ? { height: "100%" } : { width: "100%" });
            let afterOnResizeTimeout = null;
            splitter.bind("resize", function (e) {
                splitterPreventDefaultOnWidthResizeFunc(e);
                if (e.isDefaultPrevented()) { return; }
                if (afterOnResizeTimeout == null) {
                    let splitterJElem = $(this.element);
                    splitterJElem.find('.k-splitbar[aria-expanded]').removeAttr("aria-expanded");
                    afterOnResizeTimeout = setTimeout(function () {
                        afterOnResizeTimeout = null;
                        let visibleIcons = splitterJElem.find('.k-icon:visible');
                        let getFilter = function (text) {
                            const filterText = text;
                            const filterTextLength = filterText.length;
                            return function () {
                                let classNames = this.className.split(/\s+/);
                                for (var i = 0; i < classNames.length; i++) {
                                    if (classNames[i].substr(0, filterTextLength) === filterText) {
                                        return true;
                                    }
                                }
                                return false;
                            };
                        };
                        let appendAndReturnBelowOrAboveText = function (expand) {
                            const isExpand = expand === true;
                            const beforeText = "Click to " + (isExpand ? "expand" : "collapse") + " ";
                            const afterText = " pane";
                            const above = "above";
                            const below = "below";
                            const left = "left";
                            const right = "right";
                            let paneName = null;
                            return function () {
                                let bar = $(this).closest(".k-splitbar");
                                let getNameOrNull = function (prev) {
                                    let name = (prev === true ? bar.prev() : bar.next()).attr("data-pane-name");
                                    if (name != null && name.length > 0) {
                                        paneName = name;
                                        return name.toLowerCase();
                                    }
                                    return null;
                                }
                                let classNames = this.className.split(/\s+/);
                                let getTextFunction = function () {
                                    for (var i = 0; i < classNames.length; i++) {
                                        if (classNames[i].indexOf("arrow") > -1) {
                                            if (classNames[i].indexOf("up") > -1) {
                                                return beforeText + (getNameOrNull(!isExpand) || (isExpand ? below : above)) + afterText;
                                            }
                                            else if (classNames[i].indexOf("down") > -1) {
                                                return beforeText + (getNameOrNull(isExpand) || (isExpand ? below : above)) + afterText;
                                            }
                                            else if (classNames[i].indexOf("right") > -1) {
                                                return beforeText + (getNameOrNull(isExpand) || (isExpand ? left : right)) + afterText;
                                            }
                                            else if (classNames[i].indexOf("left") > -1) {
                                                return beforeText + (getNameOrNull(!isExpand) || (isExpand ? left : right)) + afterText;
                                            }
                                        }
                                    }
                                    return beforeText + afterText.trim();
                                };
                                let text = getTextFunction();
                                if (paneName != null) {
                                    splitterJElem.parent().find(".splitterPaneToggler:contains('" + paneName + "')").attr("title", text);
                                }
                                return text;
                            };
                        };

                        visibleIcons.filter(getFilter("k-expand")).attr("title", appendAndReturnBelowOrAboveText(true));
                        visibleIcons.filter(getFilter("k-collapse")).attr("title", appendAndReturnBelowOrAboveText(false));
                        splitterJElem.find(".k-splitbar").attr("title", "Drag to resize");
                        if (!e.isDefaultPrevented()) {
                            afterMapResize();
                            afterGridResize();
                        }
                        savePanesInfo();
                    }, 150);
                }
            });
            splitter.bind("collapse", window.collapseExpandFunc);
            splitter.bind("expand", window.collapseExpandFunc);
            if (deleteExisting) {
                pageResize({ mapCenter: mapCenter, gridScrollTop: gridScrollTop, resetSplitter: false });
                splitter.size(".k-pane:last", splitter.size(".k-pane:last"));
                pageResize({ mapCenter: mapCenter, gridScrollTop: gridScrollTop, resetSplitter: false });
            }
            else {
                splitter.trigger("resize");
                // Set up toggle buttons up top, make sure they match the default setting
                for (let i = 0; i < splitter.options.panes.length; i++) {
                    let pane = splitter.options.panes[i];
                    $('#splitPaneTopBar [data-pane-index="' + i + '"]').toggleClass("off", pane.collapsed === true);
                }
            }
            if (shouldReverse) {
                shouldReverse = false;
            }
            collapseExpandFunc();
            savePanesInfo();
            setTimeout(function () {
                $(document).scrollTop(docScrollTop);
            }, 50);
            return true;
        };
        pageResize();
        $("#map").css("padding", "");
    });
    $("#splitPaneTopBar").on("click", "button.splitterPaneToggler", function () {
        let elem = $(this);
        let paneIndex = parseInt(elem.attr("data-pane-index"));
        if (!isNaN(paneIndex)) {
            let splitter = $(".resizableChildren").data("kendoSplitter");
            if (splitter != null) {
                let wasOff = elem.is(".off");
                let countNotCollapsed = 0;
                for (let i = 0; i < splitter.options.panes.length; i++) {
                    if (i == paneIndex) continue;
                    countNotCollapsed += (splitter.options.panes[i].collapsed !== true ? 1 : 0);
                }
                if (countNotCollapsed > 0 && splitter.options.panes[paneIndex].collapsible === true) {
                    splitter[wasOff ? "expand" : "collapse"](".k-pane:eq(" + paneIndex + ")");
                    elem.toggleClass("off", splitter.options.panes[paneIndex].collapsed === true);
                }
                window.collapseExpandFunc();
            }
        }
    });

    $(document).ready(function () {
        let splitPaneLayout = $("#splitPaneLayout");
        let toggleButton = splitPaneLayout.closest(".splitPaneLayoutHider");
        toggleButton.on("click", function () {
            if ($(this).css("cursor") != "not-allowed") {
                toggleSplitOrientationTopBottomToLeftRight();
            }
        });
        splitPaneLayout.on("change", function () {
            let val = $(this).val();
            switch (val) {
                case "topbottom": setSplitOrientationTopBottom(); break;
                case "leftright": setSplitOrientationLeftRight(); break;
                case "basedonscreen": setSplitOrientationBasedOnWindowSize(); break;
            }
            let useSpinner = false && typeof loadSpinner === "function" && typeof stopSpinner === "function";
			if (useSpinner)  {
				loadSpinner();
				setTimeout(function () {
					setUpSplitter();
					if (useSpinner) stopSpinner();
				}, 150);
			}
			else {
				setUpSplitter();
			}
        });

		let insideChange = {};
		$("#splitPaneTopBar").on("change", ".onoffswitch input[data-pane-name]", function (e) {
			if (insideChange.hasOwnProperty(this.id)) return;
			insideChange[this.id] = true;
			let splitter = $(".resizableChildren").data("kendoSplitter");
			let panes = splitter.element.find(".k-pane");
			let elemToSwitch = panes.filter('[data-pane-name="' + $(this).attr("data-pane-name") + '"]');
			if (splitter != null && elemToSwitch.length > 0) {
				if (!this.checked && panes.filter(":not(.k-state-collapsed)").length < 2) {
					e.preventDefault();
					e.stopPropagation();
					this.checked = !this.checked;
				}
				else {
					const className = "hideMyChildren";
					if (!this.checked) elemToSwitch.addClass(className);
					splitter[this.checked ? "expand" : "collapse"](elemToSwitch);
					if (this.checked) elemToSwitch.removeClass(className);
					window.collapseExpandFunc();
				}
			}
			delete insideChange[this.id];
		});
    });
</script>
        </div>

<div id="InitialLoadDiv" style="text-align: center;width: 100%; display: none"> <BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><font style="font-size: 30px">No Results Yet</font><BR /> Try performing a new search.</div>
<div id="NoResultsDiv" style="text-align: center;width: 100%; display: none"> <BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><BR /><font style="font-size: 30px">No Results Found</font><BR /> Try performing another search.</div>

<script>
    if (false) {
        if (document.getElementById('InitialLoadDiv') != null)
            document.getElementById('InitialLoadDiv').style.display = 'block';
        if (document.getElementById('hideSearch') != null)
            document.getElementById('hideSearch').style.display = 'none';
        $('.export-button').prop('disabled', true);
        $('.export-button').attr('title', 'No results to export. Trying performing a new search.');
    }
    else if (116 == 0) {
        if (document.getElementById('NoResultsDiv') != null)
            document.getElementById('NoResultsDiv').style.display = 'block';
        if (document.getElementById('hideSearch') != null)
            document.getElementById('hideSearch').style.display = 'none';
        $('.export-button').prop('disabled', true);
        $('.export-button').attr('title', 'No results to export. Trying performing a new search.');
    } else {
        if (document.getElementById('rightSectionContent') != null)
            document.getElementById('rightSectionContent').style.display = 'block';
    }
      
</script>




    </div>
</body>
<script>
    //On resize it will check the window height and subtract-190 and set that to be the div size. This will expand bodycontent and hide the grey
    //setWindowResizeFunc(resize);

</script>
<script>

</script>
<script>
    function calcActiveHistoricalFieldDisplay() {
                                if ('Active' == 'Historical') {
                                    document.getElementById('tbldates').style.display = 'block';
                                    document.getElementById('ActiveLink').style.display = 'block';
                                    document.getElementById('HistoricalLink').style.display = 'none';
                                    document.getElementById('AdminCallsCIM').innerHTML = "<a href='https://data.colorado.gov/Water/DWR-Calls-History/t7na-sz5k' target='_blank'>Colorado Information Marketplace</a>";
                                }
                                else {
                                    document.getElementById('tbldates').style.display = 'none';
                                    document.getElementById('ActiveLink').style.display = 'none';
                                    document.getElementById('HistoricalLink').style.display = 'block';
                                    document.getElementById('AdminCallsCIM').innerHTML = "<a href='https://data.colorado.gov/Water/DWR-Active-Calls/x5a5-6sqv' target='_blank'>Colorado Information Marketplace</a>";
                                }
                            };
    //Date Picker

</script>

<script type="text/javascript" src="/Tools/Scripts/spin.min.js"></script>
<script type="text/javascript">
    var submit;
    function checkForm(form) {
        return false;
    }
    //set button type
    function Clicked(button) {
        submit = button;
    }
    function executeSpinner() {
        var opts = {
            lines: 12, // The number of lines to draw
            length: 7, // The length of each line
            width: 4, // The line thickness
            radius: 10, // The radius of the inner circle
            color: '#000', // #rgb or #rrggbb
            speed: 1, // Rounds per second
            trail: 60, // Afterglow percentage
            shadow: false, // Whether to render a shadow
            hwaccel: false // Whether to use hardware acceleration
        };
        if (submit.value == "Submit") {
            $("#loading").fadeIn();

            var trget = document.getElementById('loading');
            new Spinner(opts).spin(trget);
        }

    }
</script>

<script>

    function CheckForResize() {
        return true;
    }
    function getLatitudeFieldName() {
        return "Calling_WDID_latdecdeg";
    }
    function getLongitudeFieldName() {
        return "Calling_WDID_longdecdeg";
    }
    function getKendoWidgetForMapJQuerySelector() {
        return "#AdministrativeCallsGrid";
    }
    function ParametersForResize() {
        
        
    }


    $(".maptab").click(function () {
        $("#labeltab").css('display', 'block');
        refreshGrid();
    });
    $("#DataGrid").click(function () {
        $("#labeltab").css('display', 'none');
        refreshGrid();
    });

    //Implements max length on location WDID field
    $("#LocationWDIDSearch_wdidFrom").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });

    $("#LocationWDIDSearch_wdidTo").keypress(function (e) {
        var lastInput = String.fromCharCode(e.which);
        if (this.value.length <= 7) {
            var selectedText = getSelectedText();
            if (selectedText) {
                return this.value;
            }
        }
        return this.value.length < 7;
    });
    function getSelectedText() {
        var text = "";
        if (typeof window.getSelection != "undefined") {
            text = window.getSelection().toString();
        } else if (typeof document.selection != "undefined" && document.selection.type == "Text") {
            text = document.selection.createRange().text;
        }
        return text;
    }


</script>

<script>
    var expander = document.getElementById('expandDiv');
    $('.expand').click(function () {
        $(this).text(function (i, text) {
            if (text == "Hide") {
                $(expander).show();
                $('.col-left-search').addClass('hidden');
                $('.result').removeClass('col-left-search').addClass('hidden');
            } else {
                $(expander).hide();
                $('.col-left-search').removeClass('hidden');
                $('.result').removeClass('hidden').addClass('col-left-search');
            }
        });
        resize();
        refreshGrid();
        $(window).trigger('resize');
    });

    $("#StartDate").change(function (e) {
        validateSearchFields();

    });
    $("#EndDate").change(function (e) {
        validateSearchFields();
    });
    function validateSearchFields() {
        $('#buttonSearch').removeAttr("disabled");
        var validated = true;
        var startDate = document.getElementById('StartDate').value;
        var endDate = document.getElementById('EndDate').value;
        if ((startDate == "" || endDate == "")&& 'True' =='False') {
            $('#buttonSearch').attr("disabled", "disabled");
        }
        return validated;
    }

</script>

        <div id="modalID" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content" style="font-family: sans-serif; color: black">
 <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title" style="text-align:center"><b>About Administrative Calls</b></h4>
    </div>
    <div class="modal-body" style="min-height: 350px">
        <h5><b><u>Description</u></b></h5>
        <p>
            Division of Water Resources Active Calls. The Call is a term used by the state engineer to effectively communicate the administrative status of the natural stream. The Call communicates the priority required during a specified period of time for a water right located within a specific stream or stream segment to divert under the Prior Appropriation Doctrine. The basic purpose of the Call is to â€œcall outâ€ water rights that are not in priority in order to make water available to the senior water right that is diverting less than its decreed amount of water that it could beneficially use.

            
        </p>
        <br />
        <h5><b><u>Resources</u></b></h5>

        <p>
            <a href="https://docs.google.com/document/d/e/2PACX-1vRN35hLVrkXemNrMcrK1Ks4rcT1Ps7xfUI9gUPJ5FOpaaNSp4-iGpOol1s678018NNURkTpM4ZbB6uF/pub" target="_blank">
                User Guide
            </a>
        </p>

        <p>
            <a href="/Tools/AdministrativeCalls/DataDictionary/GetDataDictionary" target="_blank">Data Dictionary (Administrative Calls)</a>
        </p>
        
        <p>
            <a href=" https://dnrweblink.state.co.us/dwr/ElectronicFile.aspx?docid=3600964&dbid=0" target="_blank">
                Administrative Calls Standard
            </a>
        </p>
        <p>
                <a href="https://dwr.state.co.us/Portal/dwr/AskDWR?topicNum=5&amp;officeNum=8&amp;subject=Question%20about%20Administrative%20Calls" target="_blank">
        Ask DWR: Other Questions About Administrative Calls
    </a>

        </p>

        <p>
            <a href="#modalID1" role="tab" data-toggle="modal">Subscribe to email list <span class="glyphicon glyphicon-envelope"></span></a>
        </p>

<script>
    const recaptchaWidgetIdAttr = 'recaptcha-widget-id';
    function captchaCallback() {
        $('.g-recaptcha').each(function (index, el) {
            const jEl = $(el);
            const jForm = jEl.closest('form');
            const isInvisibleClass = jEl.is('.invisible-recaptcha');
            const isInvisibleByAttr = jEl.attr('data-size') == 'invisible';
            const isInvisible = isInvisibleClass || isInvisibleByAttr;
            const parent = jEl.closest('.recaptcha-parent');
            let allowSubmit = false;
            const toggleError = function (showError) {
                showError = showError === true;
                allowSubmit = !showError;
                parent.toggleClass('recaptcha-error', showError);
                parent.find('.recaptcha-error-message').toggle(showError);
            };
            const grecaptchaArgs = {
                sitekey: isInvisible ? '6LcICqgkAAAAAE0Fbv5JZh_XLsYkffu5LN9OT2qr' : '6LfHrKckAAAAAG9BWMYNFvlD5qFSZF4UKVEj7abN',
                callback: function (token) {
                    jForm.find('.g-recaptcha-response').val(token);
                    if (isInvisible) {
                        allowSubmit = true;
                        jForm.submit();
                    }
                    else {
                        toggleError(false);
                    }
                }
            };
            if (!isInvisible) {
                grecaptchaArgs['expired-callback'] = function () {
                    toggleError(true);
                }
            }
            let widgetId = grecaptcha.render(el, grecaptchaArgs, true);
            jEl.attr(recaptchaWidgetIdAttr, widgetId);

            jForm.submit(function (event) {
                if (!allowSubmit) {
                    event.preventDefault();
                    if (isInvisible) {
                        grecaptcha.execute(widgetId);
                    }
                    else {
                        alert('Please fill out CAPTCHA');
                    }
                }
                else {
                    let onRecaptchaSubmitAttr = jEl.attr('on-recaptcha-submit');
                    if (onRecaptchaSubmitAttr != null && onRecaptchaSubmitAttr.length > 0) {
                        let func = window[onRecaptchaSubmitAttr];
                        if (typeof func === 'function') {
                            func(jForm[0]);
                        }
                    }
                }
            });
        });
    }

    function getRecaptchaWidgetId(el) {
        return $(el).attr(recaptchaWidgetIdAttr);
    }

    function getRecaptchaResponse(el) {
        return grecaptcha.getResponse(getRecaptchaWidgetId(el));
    }</script>
<script async="" defer="" src="https://www.google.com/recaptcha/api.js?onload=captchaCallback&amp;render=explicit"></script>
<style>
    .grecaptcha-badge {
        bottom: 30px;
        z-index: 2060;
    }

    .g-recaptcha:not(.invisible-recaptcha):not([data-size="invisible"]) {
        display: inline-block;
    }

    .recaptcha-error {
        border: 1px solid red;
        padding: 3px;
        margin: 13px;
    }

    .recaptcha-error-message {
        color: red;
    }</style>


<div id="modalID1" class="modal fade" role="dialog" style="overflow: visible;">
    <div class="modal-dialog" style="max-width: 450px">
        <div class="modal-content">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"  onclick="$('#modalID1').modal('toggle');">&times;</button>
                    <h5 class="modal-title" style="text-align: center"><b>Subscribe to CDSS Online Email Notifications</b></h5>
                </div>
                <div id="mainDiv" class="mainDiv">
                    <div id="subscriptionFields" class="modal-body">
                        <input name="__RequestVerificationToken" type="hidden" value="-g6HQH8UFz2sy3LP7X-6i5il-cv0PEUy0JT68CNMYysRx05Jhl4nDE-Gybm0890PBnOfDvt--qCAlphhtGcm_l9PHApgNtY8Qh0-r5v0X4s1" />
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="text" class="form-control" id="txtemail" placeholder="Email" name="email">
                        </div>
                        <div class="form-group">
                            <label for="pwd">Verify Email:</label>
                            <input type="text" class="form-control" id="txtverifyemail" placeholder="Verify Email" name="pwd">
                        </div>
                        <div class="recaptcha-error recaptcha-parent"><div class="g-recaptcha"></div><div class="recaptcha-error-message">Please verify that you are not a robot.</div></div>
                        
                        
                        
                        <br />


                        <div class="form-group" id="span1" style="display:none;color:red"><span></span></div>
                    </div>
                    
                    <div class="form-group" style="text-align:center">

                        <button type="button" class="btn btn-rt" tabindex="4" onclick="EmailScription();">Subscribe</button>
                        <button type="button" class="btn btn-rt"  onclick="$('#modalID1').modal('toggle');">Cancel</button>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>
<div id="SubscriptionSuccess" class="modal fade" role="dialog">
    <div class="modal-dialog" style="max-width: 450px">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h5 class="modal-title" style="text-align: center"><b id="SubscriptionHeader">Success</b></h5>
            </div>
            <div class="modal-body">
                <div class="successDiv" id="successDiv">
                    <br />
                    <div class="form-group" id="successSpan" style="text-align:center">
                        <span> Hallelujah</span>
                    </div>
                </div>
                <br />
                <div class="form-group" style="text-align:center">
                    <button type="button" class="btn btn-rt"  onclick="$('#SubscriptionSuccess').modal('toggle');">Close</button>
                </div>
            </div>
        </div>

    </div>
</div>
<script>
    $(document).ready(function () {
        // codes works on all bootstrap modal windows in application
        $('.modal').on('hidden.bs.modal', function (e) {
           $("#span1").css('display', 'none');
           $("#span1").text("");
           $("#txtemail").val("");
           $("#txtverifyemail").val("");
           $("div.modal-backdrop").prop("class", "");
           grecaptcha.reset();
        });
    })
</script> 
<script>
    var imNotARobot = function() {
        $("#span1").css('display', 'none');
        $("#span1").text("");
    };
    function ValidateEmail(email) {
        var expr = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (email.includes("..")) {
            return false;
        };
        return expr.test(email);
    };
    function EmailScription() {
        $("#span1").css('display', 'none');
        var form = $("#subscriptionFields");
        const captchaResponse = getRecaptchaResponse(form.find(".g-recaptcha"));
        if (captchaResponse == "") {
            $("#span1").css('display', 'block');
            $("#span1").text("Robot verification missing");
            return false;
        } else {
        }
        if (!ValidateEmail($("#txtemail").val())) {
            $("#span1").css('display', 'block');
            $("#span1").text("Invalid email address");
            return false;
        }

        if ($("#txtemail").val() != $("#txtverifyemail").val())
        {
            $("#span1").css('display', 'block');
            $("#span1").text("Verify Email does not match Email address");
            return false;
        }
        else {
            let data = {
                email: $('#txtemail').val(),
                list: "Tools and Technology News",
                "g-recaptcha-response": captchaResponse
            };
            
            var token = form.find(':input:hidden[name*="RequestVerificationToken"]');
            if (token.length > 0)
                data[token.attr("name")] = token.val();
            $.ajax({
                url: '/Tools/Subscription/EmailVerification',
                type: "POST",
                dataType: "JSON",
                data: data,
                success: function (data) {

                    if (data.EmailAddress == "Failed") {
                        document.getElementById('SubscriptionHeader').innerHTML = "Failure";
                        $("#successSpan").text("Subscription failed. Please contact dnr_dwr_app_support@state.co.us");
                    }else if (data.EmailExists == false) {
                        $("#successSpan").text("Subscription success.  An email has been sent to allow you to complete your registration.");
                    }
                    else {
                        $("#successSpan").text("Successfully subscribed to notification list.");
                    }

                    $('#modalID1').modal('hide');
                    $('#SubscriptionSuccess').modal('show');
                },
                error: function (ex) {
                    alert('Error' + ex);
                }
            });

        }

    }

</script>



    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-dwr" data-dismiss="modal">Close</button>
    </div>                </div>
            </div>
        </div>
        <div id="exportID" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content" style="font-family: sans-serif; color: black">
                </div>
            </div>
        </div>
        <!-- Login expired Modal-->
        <div id="modalSignOut" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" id="modalSignOutTitle" style="text-align: center"><b>Log out:</b></h4>
                    </div>
                    <style>
                        div#modalSignOutBody {
                            text-align: center;
                        }
                    </style>
                    <div class="modal-body" id="modalSignOutBody" style="min-height: 50px;">
                        You have been inactive for too long and will be automatically logged out in <span id="modalSignOutTime"></span>
                        <br><br>To stay signed in longer, sign out, then sign back in after selecting the "Stay signed in" option.
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="modalSignOutShowButton" style="display: none;" class="btn btn-rt" data-toggle="modal" data-target="#modalSignOut"></button>
                        <button type="button" id="modalSignOutRenewButton" class="btn btn-dwr">Click here to stay signed in</button>
                        <button type="button" id="modalSignOutDismissButton" class="btn btn-dwr" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Logout Modal-->
        <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="logoutModalLabel" style="float: left">Confirm logout</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">Ã—</span>
                        </button>
                        <BR />
                    </div>
                    <div class="modal-body">Select "Sign out" below if you are ready to end your current session.</div>
                    <div class="modal-footer">
                        <button class="btn-dwr" type="button" value="Log out" onclick="location.href = '/Tools/Home/LogoutUser'">Sign out</button>
                        <button class="btn-dwr" type="button" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer" class="footer navbar-fixed-bottom">
        <table class="tableFooter" cellspacing="0">
            <tr>
                <td>
                    <a href="http://cwcb.state.co.us" target="_blank">CWCB</a> | <a href="http://dwr.colorado.gov" target="_blank">DWR</a> |
                    <a href="https://dnr.colorado.gov/" target="_blank">DNR</a> | <a href="http://www.colorado.gov/" target="_blank">Colorado.gov</a> |
                    <a href="/Tools/TermsOfUse.htm" target="blank">Terms of Use</a> |
                    <a href="https://dnr.colorado.gov/accessibility" target="_blank">Accessibility & Accommodations</a> |
                    <a href="https://www.colorado.gov/privacy-statement" target="_blank">Privacy Policy</a>
                </td>
            </tr>
        </table>
    </div>


</body>
</html>
    <script>
        var admin_flag = 0;
        var admin_message = '&#39;&#39;';
        getNamespace("AdminMessageUtils").setAdminFlagAndMessage(admin_flag, admin_message);
        var CurrentEnvironment = 'https://dwr.state.co.us/tools/';
    </script>

<script>
    if (typeof CheckForResize == 'function') {
        start = CheckForResize();
    } else {
        start = false;
    }
    function ShowBanner(shouldShow) {
        if (shouldShow) {
            document.getElementById('hideBanner').style.display = 'block';
            document.getElementById('ImgDnrLarge').style.display = 'block';
            document.getElementById('showBanner').style.display = 'none';
            document.getElementById('userDiv').style.display = 'block';
        } else {
            document.getElementById('hideBanner').style.display = 'none';
            document.getElementById('ImgDnrLarge').style.display = 'none';
            document.getElementById('showBanner').style.display = 'block';
            document.getElementById('userDiv').style.display = 'none';
        }
        $(document).trigger("bannerShownHidden", shouldShow);
        if (start) {
            refreshGrid();
        }
    }
    setWindowResizeFunc(start ? ParametersForResize : resizeMenu);
    function resize(gridShown, mapShown, manualMapSize, searchOverallResultCount, searchLimitedResultCount, mapInfoFeatureCount, gridName) {
        let resizeMapFunc = window.resizeMap || function () { };
        resizeMenu();
        var headerHeight;
        if (document.getElementById('header'))
            headerHeight = document.getElementById('header').offsetHeight;
        var footerHeight;
        if (document.getElementById('footer'))
            footerHeight = document.getElementById('footer').offsetHeight;
        var rightSectionContent;
        if (document.getElementById('rightSectionContent'))
            rightSectionContent = document.getElementById('rightSectionContent').offsetHeight;
        var limitExceeded = false;
        var rightSectionNavTabs;
        var mapLimitMsgExceed;
        var gridLimitMsgExceed;
        var maplimitExceeded;
        var mapPoints;
        rightSectionNavTabs = document.getElementById('rightSectionNavTabs') ? document.getElementById('rightSectionNavTabs').offsetHeight + 10 : 0;

        if ((gridShown && mapShown) && searchOverallResultCount > searchLimitedResultCount && mapInfoFeatureCount >= 10000) {
            gridLimitMsgExceed = document.getElementById('exeedLimitMsg').offsetHeight;
            mapLimitMsgExceed = (document.getElementById('exeedLimitMsgMap') || { offsetHeight: 0 }).offsetHeight;
            limitExceeded = true;
            maplimitExceeded = true;
        } else if (mapShown && mapInfoFeatureCount >= 10000) {
            mapLimitMsgExceed = (document.getElementById('exeedLimitMsgMap') || { offsetHeight: 0 }).offsetHeight;
            maplimitExceeded = true;
        } else if (gridShown && searchOverallResultCount > searchLimitedResultCount) {
            gridLimitMsgExceed = document.getElementById('exeedLimitMsg').offsetHeight;
            limitExceeded = true;
        }
        if (mapShown && !maplimitExceeded && document.getElementById('mapPoints')) {
            maplimitExceeded = false;
            mapPoints = document.getElementById('mapPoints').offsetHeight;
        }
        if (mapPoints == null) mapPoints = 0;
        var mobile = false;
        if (window.innerWidth < 710) {
            mobile = true;
        }
        var sizeSet;
        var messageBox = document.getElementById('messageBox');
        sizeSet = window.innerHeight - footerHeight - headerHeight - 6 - (messageBox != null ? messageBox.offsetHeight : 0);

        //Mobile
        if (mobile) {
            if ((gridShown)/* && manualMapSize == 0*/) {
                document.getElementById('rightSectionContent').style.height = sizeSet + "px";
                if (!$('#leftSectionContent').hasClass('hidden')) {
                    sizeSet = window.innerHeight - footerHeight - 6;
                    document.getElementById('rightSectionContent').style.height = sizeSet + "px";
                    rightSectionContent = document.getElementById('rightSectionContent').offsetHeight;
                }
                if (limitExceeded && maplimitExceeded) {
                    resizeGrid(gridName, gridLimitMsgExceed + rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, rightSectionNavTabs + mapLimitMsgExceed);
                } else if (maplimitExceeded) {
                    resizeGrid(gridName, rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, rightSectionNavTabs + mapLimitMsgExceed);
                } else if (limitExceeded) {
                    resizeGrid(gridName, gridLimitMsgExceed + rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, mapPoints + rightSectionNavTabs);
                } else {
                    resizeGrid(gridName, rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, mapPoints + rightSectionNavTabs);
                }
            } else if (mapShown) {
                resizeMapFunc(window.innerHeight, headerHeight + footerHeight + manualMapSize);
            }
            //if (window.screen.availHeight == window.outerHeight) {
            //}
        } //laptop
        else {
            if ((gridShown)/* && manualMapSize == 0*/) {
                document.getElementById('rightSectionContent').style.height = sizeSet + "px";
                if (limitExceeded && maplimitExceeded) {
                    resizeGrid(gridName, gridLimitMsgExceed + rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, rightSectionNavTabs + mapLimitMsgExceed);
                } else if (maplimitExceeded) {
                    resizeGrid(gridName, rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, rightSectionNavTabs + mapLimitMsgExceed);
                } else if (limitExceeded) {
                    resizeGrid(gridName, gridLimitMsgExceed + rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, mapPoints + rightSectionNavTabs);
                } else {
                    resizeGrid(gridName, rightSectionNavTabs, manualMapSize);
                    resizeMapFunc(rightSectionContent, mapPoints + rightSectionNavTabs);
                }
            } else if (mapShown) {
                resizeMapFunc(window.innerHeight, headerHeight + footerHeight + manualMapSize);
            }

        }
    }


    function resizeGrid(gridName, size, toolbarHeight) {
        if (toolbarHeight == null) toolbarHeight = 0;
        var gridElement = $("#" + gridName),
            dataArea = gridElement.find(".k-grid-content"),
            dataAreaHeader = gridElement.find(".k-grid-header"),
            dataAreaFooter = gridElement.find(".k-pager-wrap"),
            gridToolbar = gridElement.find(".k-grid-toolbar"),
            gridHeight = gridElement.innerHeight(),
            otherElements = gridElement.children().not(".k-grid-content"),
            otherElementsHeight = document.getElementById('rightSectionContent').offsetHeight;
        gridElement.innerHeight(otherElementsHeight - (size + 13));
        dataArea.innerHeight(otherElementsHeight - (size + toolbarHeight + 15 + gridToolbar.innerHeight() + dataAreaHeader.innerHeight() + dataAreaFooter.innerHeight()));
    }


    $(document).ready(function () {
        if (start) {
            refreshGrid();
        }
        resizeMenu();
    });

    //Don't export / submit on enter keypress'
    $(document).on("keypress", "form", function (event) {
        return event.keyCode != 13;
    });


    window.onload = function () {
        var isIE = false || !!document.documentMode;
        if (isIE) {
            refreshGrid();
        }
    };

    document.addEventListener("click", function (evt) {
        if ($(evt.target).closest('#menuDropdown').length || $(evt.target).closest('#navbar-collapse-1').length) {
            return;
        }
        else {
            if ($("#menuDropdown").hasClass("change")) {
                $("#menuDropdown").toggleClass("change");
                $('#menuDropdown').parent().toggleClass('open');
            }
        }
    });

    // JTC: Fixes DateTime rounding issue in Chrome browsers v67 and up
    // Begin Chrome DateTime Patch
    var onRequestEnd = function (e) {
        if (e.hasOwnProperty('response') && e.response.Data && e.response.Data.length) {

            var data = e.response.Data;
            performance.mark("loopRecords-start");
            data.forEach(function (value, index, array) {
                offsetDateFields(value);
            });
            performance.mark("loopRecords-end");
            performance.measure("loopRecords", "loopRecords-start", "loopRecords-end");

            var measures = performance.getEntriesByName("loopRecords");
            var measure = measures[0];
            //console.log("loopRecords milliseconds:", measure.duration);

            performance.clearMarks();
            performance.clearMeasures();
        }
    }

    function offsetDateFields(obj) {
        for (var name in obj) {
            var prop = obj[name];
            if (typeof (prop) === "string" && prop.indexOf("/Date(") == 0) {
                obj[name] = prop.replace(/-?\d+/, function (n) {
                    // If there was ever a magic number, -163530000000 would be it
                    if (n < -163530000000) {
                        var offsetMiliseconds = new Date(parseInt(n)).getTimezoneOffset() * 60000;
                        return parseInt(n) + offsetMiliseconds;
                    }
                    return parseInt(n);
                });
            }
        }
    }
    // End Chrome DateTime Patch
    
</script>

    <script>
        function getGoogleMapsApiUrl() {
            return "https://maps.googleapis.com/maps/api/js?key=AIzaSyC9b6pH6YqgsTjeYn3MA5hAUJbcWsreRFw&libraries=places";
        }
    </script>
    <script>
        (function () {
            let tryInit = function (numTimes) {
                if (numTimes == null || isNaN(Number(numTimes))) numTimes = 5;
                if (typeof initialize === "function") {
                    initialize();
                }
                else {
                    if (numTimes > 0) {
                        setTimeout(function () { tryInit(numTimes - 1); }, 50);
                    }
                }
            };
            let tryInit3 = function () { tryInit(3); };
            $(document.body).one("click.tryInitMap", "#Map", tryInit3);
            $(document).ready(function () {
                if ($("#Map").length < 1) {
                    $(document.body).off("click.tryInitMap", "#Map", tryInit3);
                    tryInit3();
                }
            });
        }());

    </script>
